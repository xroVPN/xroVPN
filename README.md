<html lang="fa" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ VPN - Ø§ÛŒÚ©Ø³Ø±Ùˆ</title><style>:root{--primary-color:#000000;--primary-dark:#1a1a1a;--primary-light:#333333;--secondary-color:#000000;--accent-color:#000000;--success-color:#000000;--warning-color:#000000;--danger-color:#ff0000;--dark-blue:#000000;--dark-purple:#000000;--text-color:#000000;--text-light:#666666;--text-white:#ffffff;--bg-color:#ffffff;--card-bg:#f5f5f5;--card-hover:#e0e0e0;--border-color:rgba(0,0,0,0.3);--shadow-color:rgba(0,0,0,0.1);--glass-effect:linear-gradient(135deg,rgba(200,200,200,0.15),rgba(230,230,230,0.15));--glass-border:1px solid rgba(200,200,200,0.2);--glass-shadow:0 10px 30px rgba(0,0,0,0.1);--transition:all .3s cubic-bezier(.4,0,.2,1);--glow-effect:0 0 15px rgba(0,0,0,0.4),0 0 30px rgba(0,0,0,0.2);--bg-line1:#e0e0e0;--bg-line2:#d0d0d0;--accent-dark:#1a1a1a;--accent-mid:#3a3a3a;--glass:#ffffffcc;--loader-height:7vh;--loader-max-h:48px;--z-index-modal:1000;--z-index-overlay:999;--z-index-notification:10000;--z-index-loading:100000;--notebook-lines:repeating-linear-gradient(0deg,transparent,transparent 49px,var(--bg-line1) 49px,var(--bg-line1) 50px);}.loading-overlay{position:fixed;inset:0;z-index:var(--z-index-loading);background:radial-gradient(1200px 300px at 10% 10%,rgba(255,200,120,0.06),transparent 6%),radial-gradient(900px 260px at 90% 80%,rgba(120,160,255,0.04),transparent 6%),repeating-linear-gradient(0deg,var(--bg-line1),var(--bg-line1) 2px,var(--bg-line2) 3px,var(--bg-line2) 6px);display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;margin:0;padding:0;overflow:hidden;font-family:Tahoma,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;opacity:0;visibility:hidden;transition:all 0.5s ease;position:relative;}.loading-overlay.show{opacity:1;visibility:visible;}.loading-overlay.fade-out{opacity:0;visibility:hidden;}.loading-hero{width:100%;max-height:62vh;height:auto;object-fit:contain;margin:10px auto;opacity:0.85;filter:drop-shadow(0 22px 50px rgba(0,0,0,0.45));display:block;transform:translateZ(0);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.3);border:none !important;outline:none !important;}.loading-hero *{border:none !important;outline:none !important;box-shadow:none !important;}.loading-loader{width:84vw;max-width:520px;height:var(--loader-height);max-height:var(--loader-max-h);border-radius:999px;background:linear-gradient(135deg,#f8f8f8 0%,#f0f0f0 100%);box-shadow:inset 4px 4px 10px rgba(0,0,0,0.09),inset -4px -4px 10px rgba(255,255,255,0.85),0 10px 30px rgba(0,0,0,0.18);overflow:hidden;position:relative;display:flex;align-items:center;padding:4px;margin:10px auto;border:1px solid rgba(0,0,0,0.1);z-index:3;}.loading-loader::before{content:"";position:absolute;inset:0;border-radius:999px;pointer-events:none;border:1px solid rgba(0,0,0,0.1);z-index:1;}.loading-loader::after{content:"";position:absolute;inset:1px;border-radius:999px;background:linear-gradient(135deg,#f8f8f8 0%,#f0f0f0 100%);pointer-events:none;z-index:2;}.loading-fill{height:100%;width:0%;border-radius:999px;background:linear-gradient(90deg,#111 0%,#444 45%,#111 100%);box-shadow:inset 0 0 30px rgba(255,255,255,0.06),0 6px 18px rgba(0,0,0,0.25);position:relative;overflow:hidden;transition:width 3s linear;z-index:3;}.loading-fill::before{content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(255,255,255,0.06) 0%,rgba(255,255,255,0.18) 45%,rgba(255,255,255,0.06) 60%);transform:translateX(-120%);filter:blur(8px);transition:transform 3s linear;}.loading-loader .loading-label{position:absolute;left:12px;right:12px;z-index:4;font-size:0.85rem;color:rgba(255,255,255,0.9);text-shadow:0 2px 6px rgba(0,0,0,0.5);display:flex;justify-content:space-between;align-items:center;pointer-events:none;font-weight:600;}.loading-loader .loading-label .loading-percent{font-family:monospace;font-size:0.92rem;opacity:0.95}@media (max-width:520px){.loading-loader{width:88vw;height:6.8vh}.loading-loader .loading-label{font-size:0.78rem}}@media (max-width:480px){.loading-hero{width:90%;margin:10px auto;}}*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;touch-action:manipulation;}body{font-family:'Vazirmatn','Segoe UI',sans-serif;background:var(--bg-color) var(--notebook-lines);color:var(--text-color);height:100vh;overflow:hidden;user-select:none;position:relative;background-size:100% 51px;background-position:top right;background-repeat:repeat-y;}.permanent-window{position:fixed;inset:0;z-index:10;background:transparent;display:flex;flex-direction:column;overflow:hidden;animation:fadeIn 1s ease-out;}@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}.top-bar{display:flex;justify-content:space-between;align-items:center;padding:6px 20px;background:var(--card-bg);border-bottom:var(--border-color);box-shadow:0 4px 20px var(--shadow-color);z-index:100;}.logo{font-size:1.3rem;font-weight:700;padding:12px 18px;border-radius:12px;cursor:pointer;background:var(--card-bg);display:flex;align-items:center;gap:12px;transition:var(--transition);border:3px solid #000000;box-shadow:var(--glow-effect);color:var(--text-color);}.logo:hover{background:var(--card-hover);transform:translateY(-3px) scale(1.05);box-shadow:0 8px 25px var(--shadow-color);}.logo i{font-size:1.4rem;}.menu-btn{position:relative;width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));border:2px solid rgba(255,255,255,0.2);cursor:pointer;display:flex;justify-content:center;align-items:center;transition:var(--transition);box-shadow:0 6px 20px var(--shadow-color);overflow:hidden;}.menu-btn::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));border-radius:50%;opacity:0;transition:var(--transition);}.menu-btn:hover::before{opacity:1;}.menu-btn::after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:28px;height:28px;border-radius:50%;background-size:cover;background-image:url('https://www.jowhareh.com/images/Jowhareh/galleries/large_a386cbed-ecf1-4dae-b850-d1902ad6c452.webp');animation:slowSpin 20s linear infinite;filter:blur(0.5px);transition:var(--transition);}.menu-btn:hover::after{animation:mediumSpin 12s linear infinite;filter:blur(0);transform:translate(-50%,-50%) scale(1.1);}.menu-btn i{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.4rem;color:var(--text-white);z-index:2;transition:var(--transition);opacity:0.8;}.menu-btn:hover i{opacity:1;transform:translate(-50%,-50%) scale(1.1);}@keyframes slowSpin{from{transform:translate(-50%,-50%) rotate(0deg);}to{transform:translate(-50%,-50%) rotate(360deg);}}@keyframes mediumSpin{from{transform:translate(-50%,-50%) rotate(0deg);}to{transform:translate(-50%,-50%) rotate(360deg);}}@media (max-width:480px){.menu-btn{width:40px;height:40px;}.menu-btn::after{width:22px;height:22px;}.menu-btn i{font-size:1.2rem;}}.content{height:calc(100vh - 50px);display:flex;flex-direction:column;padding:10px;overflow:hidden;}.welcome-container{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:-10px;}.news-container{width:100%;max-width:90%;padding:12px;border-radius:16px;text-align:center;background:transparent;box-shadow:var(--glow-effect);border:1px solid var(--border-color);}.news-content{color:var(--text-light);font-size:0.95rem;text-align:right;}.info-box{background:transparent;border-radius:14px;padding:14px;margin-bottom:12px;display:flex;align-items:center;gap:12px;opacity:0;border:1px solid var(--primary-color);box-shadow:0 4px 15px var(--shadow-color);cursor:pointer;transition:var(--transition);}.info-box:hover{transform:translateY(-2px);box-shadow:0 6px 20px var(--shadow-color);}.info-box:nth-child(1){animation:slideInLeft 0.6s ease-out 0.2s forwards;}.info-box:nth-child(2){animation:slideInRight 0.6s ease-out 0.4s forwards;}.info-box:nth-child(3){animation:slideInLeft 0.6s ease-out 0.6s forwards;}@keyframes slideInRight{from{opacity:0;transform:translateX(50px);}to{opacity:1;transform:translateX(0);}}@keyframes slideInLeft{from{opacity:0;transform:translateX(-50px);}to{opacity:1;transform:translateX(0);}}.info-icon{font-size:1.4rem;color:var(--primary-color);min-width:32px;display:flex;justify-content:center;transition:var(--transition);}.info-box:hover .info-icon{transform:scale(1.1);}.info-text{font-weight:600;min-width:60px;color:var(--warning-color);}.info-value{font-weight:600;min-width:60px;flex:1;text-align:left;direction:ltr;color:var(--text-color);}.floating-btn{position:fixed;bottom:15px;left:15px;width:70px;height:70px;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));border-radius:18px;display:flex;justify-content:center;align-items:center;font-size:26px;color:var(--text-white);box-shadow:0 10px 30px var(--shadow-color);cursor:pointer;border:none;transition:var(--transition);z-index:100;bottom:28px;animation:gentleFloat 6s ease-in-out infinite;}.floating-btn::after{content:'';position:absolute;bottom:-13px;left:50%;transform:translateX(-50%);width:35px;height:4px;background:linear-gradient(90deg,#666,#333);border-radius:2px;box-shadow:0 2px 8px rgba(0,0,0,0.4);transition:all 0.3s ease;}.floating-btn i{font-size:1.6rem;transition:var(--transition);}.floating-btn:hover{box-shadow:0 15px 40px var(--shadow-color);background:linear-gradient(135deg,var(--primary-dark),var(--primary-color));animation-play-state:paused;}.floating-btn:hover::after{width:40px;box-shadow:0 2px 12px rgba(0,0,0,0.6);animation:basePulse 1s ease-in-out infinite alternate;}.floating-btn:hover i{transform:rotate(360deg);}@keyframes gentleFloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-5px);}}@keyframes basePulse{0%{box-shadow:0 2px 8px rgba(0,0,0,0.4);}100%{box-shadow:0 2px 12px rgba(0,0,0,0.6);}}@media (max-width:480px){.floating-btn{width:65px;height:65px;font-size:24px;bottom:25px;}.floating-btn i{font-size:1.4rem;}.floating-btn::after{width:30px;height:4px;bottom:-11px;}}.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:var(--z-index-overlay);display:none;transition:opacity .3s ease;}.modal-overlay.show{display:block;opacity:1;}.modal-overlay.hidden{opacity:0;}.modal-window{position:fixed;background:var(--card-bg);z-index:var(--z-index-modal);transition:var(--transition);box-shadow:0 12px 40px var(--shadow-color);border:var(--border-color);border-radius:18px;display:flex;flex-direction:column;max-height:80vh;overflow:hidden;}.public-shop-menu{bottom:-100%;left:0;width:100%;max-height:80%;border-radius:18px 18px 0 0;transition:bottom .3s ease;}.public-shop-menu.open{bottom:0;}.source-panel{bottom:-100%;right:0;width:100%;max-height:50%;border-radius:18px 18px 0 0;transition:bottom .3s ease;}.source-panel.open{bottom:0;}.music-panel{position:fixed;background:transparent;z-index:var(--z-index-modal);transition:var(--transition);box-shadow:0 12px 40px var(--shadow-color);border:var(--border-color);border-radius:18px;display:flex;flex-direction:column;max-height:80vh;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.8);width:90%;max-width:500px;opacity:0;transition:all .3s ease;}.music-panel.open{transform:translate(-50%,-50%) scale(1);opacity:1;}.report-problem-menu{top:-100%;right:0;width:100%;max-height:65%;border-radius:0 0 18px 18px;transition:top .3s ease;}.report-problem-menu.open{top:0;}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:18px 20px;border-bottom:var(--border-color);background:var(--card-bg);box-shadow:0 4px 15px var(--shadow-color);}.modal-title-container{display:flex;align-items:center;gap:10px;}.modal-title{font-weight:700;font-size:1.3rem;color:var(--text-color);}.modal-title-img{font-size:1.4rem;cursor:pointer;transition:var(--transition);}.modal-title-img:hover,.modal-title-img.active{transform:rotate(360deg);}.home-btn{cursor:pointer;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:var(--transition);background:var(--card-bg);border:1px solid var(--border-color);}.home-btn:hover{background:var(--card-hover);transform:scale(1.1);box-shadow:0 6px 20px var(--shadow-color);}.home-btn i{font-size:1.4rem;transition:var(--transition);}.home-btn:hover i{transform:scale(1.2);}.config-source-section{margin:20px 0 10px 0;display:flex;justify-content:center;}.freedom-text{color:#000000;font-size:1rem;font-weight:600;text-align:center;padding:0px 20px;white-space:nowrap;pointer-events:none;cursor:default;}.freedom-text:hover{transform:none;background:none;box-shadow:none;}@media (max-width:480px){.freedom-text{font-size:0.9rem;padding:0px 15px;}}.modal-content{display:flex;flex-direction:column;padding:12px;background:var(--card-bg);height:100%;}.modal-content-main{flex:1;overflow-y:auto;padding:8px 0;}.config-content-bottom{margin-top:auto;padding-top:15px;border-top:1px solid var(--border-color);}.music-panel-content{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center;position:relative;background:transparent;height:100%;}.music-logo-container{position:relative;perspective:1000px;margin-bottom:30px;flex:1;display:flex;align-items:center;justify-content:center;}.music-logo{width:260px;height:260px;border-radius:50%;object-fit:cover;box-shadow:0 0 0 rgba(255,255,255,0.8),0 0 40px rgba(255,255,255,0.6),0 0 80px rgba(255,255,255,0.4),0 0 120px rgba(255,255,255,0.2),inset 0 0 20px rgba(255,255,255,0.3);animation:slowSpin 20s linear infinite,pulse 3s ease-in-out infinite alternate;transform-style:preserve-3d;transition:var(--transition);border:3px solid rgba(255,255,255,0.2);backdrop-filter:blur(10px);position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center;}.music-logo.playing{animation:mediumSpin 15s linear infinite,pulse 2s ease-in-out infinite alternate;}.music-logo.paused{animation:slowSpin 25s linear infinite,pulse 4s ease-in-out infinite alternate;}.music-logo:hover{animation:mediumSpin 12s linear infinite,pulse 1.5s ease-in-out infinite alternate;transform:scale(1.1) rotateY(10deg) rotateX(5deg);box-shadow:0 0 0 rgba(255,255,255,1),0 0 60px rgba(255,255,255,0.8),0 0 100px rgba(255,255,255,0.6),0 0 150px rgba(255,255,255,0.4),0 0 200px rgba(255,255,255,0.2),inset 0 0 30px rgba(255,255,255,0.5);border-color:rgba(255,255,255,0.4);}.music-logo img{width:100%;height:100%;border-radius:50%;object-fit:cover;}.music-logo .play-pause-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:3rem;color:rgba(255,255,255,0.9);z-index:4;transition:var(--transition);text-shadow:0 2px 10px rgba(0,0,0,0.5);}.music-logo .play-pause-icon:hover{color:rgba(255,255,255,1);text-shadow:0 2px 15px rgba(0,0,0,0.7);transform:translate(-50%,-50%) scale(1.1);}.music-logo::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:70px;height:70px;background:linear-gradient(135deg,rgba(0,0,0,0.7),rgba(0,0,0,0.5));border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:var(--transition);z-index:2;}.music-logo:hover::after,.music-logo.playing::after{opacity:1;transform:translate(-50%,-50%) scale(1.1);}.music-logo::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:0;height:0;border-left:20px solid rgba(255,255,255,0.9);border-top:12px solid transparent;border-bottom:12px solid transparent;opacity:0;transition:var(--transition);z-index:3;}.music-logo.playing::before{opacity:1;border-left:16px solid rgba(255,255,255,1);}.music-logo.paused::before{width:0;height:0;border-left:12px solid rgba(255,255,255,0.9);border-top:12px solid transparent;border-bottom:12px solid transparent;opacity:1;border-left:16px solid rgba(255,255,255,1);}.music-logo .play-icon{display:block;}.music-logo .pause-icon{display:none;}.music-logo.playing .play-icon{display:none;}.music-logo.playing .pause-icon{display:block;}@keyframes slowSpin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}@keyframes mediumSpin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}@keyframes pulse{0%{box-shadow:0 0 0 rgba(255,255,255,0.8),0 0 40px rgba(255,255,255,0.6),0 0 80px rgba(255,255,255,0.4),0 0 120px rgba(255,255,255,0.2),inset 0 0 20px rgba(255,255,255,0.3);}100%{box-shadow:0 0 20px rgba(255,255,255,1),0 0 60px rgba(255,255,255,0.8),0 0 100px rgba(255,255,255,0.6),0 0 140px rgba(255,255,255,0.4),inset 0 0 30px rgba(255,255,255,0.4);}}@media (max-width:480px){.music-logo{width:220px;height:220px;}.music-logo .play-pause-icon{font-size:2.5rem;}.music-logo::after{width:55px;height:55px;}.music-logo::before{border-left:16px solid rgba(255,255,255,0.9);border-top:10px solid transparent;border-bottom:10px solid transparent;}}.configs-container{display:flex;gap:27px;overflow-x:auto;padding:12px;direction:rtl;scrollbar-width:none;position:relative;max-height:calc(100vh - 200px);background:linear-gradient(60deg,rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.4) 30%,rgba(0,0,0,0.1) 70%,transparent 100%);border-radius:16px;margin:10px 0;}.configs-container::-webkit-scrollbar{display:none;}.configs-container{-ms-overflow-style:none;scrollbar-width:none;}.configs-container::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:16px;background:linear-gradient(60deg,rgba(0,0,0,0.2) 0%,transparent 30%);pointer-events:none;z-index:1;}.configs-container>*{position:relative;z-index:2;}.config-box{position:relative;background:linear-gradient(60deg,rgba(0,0,0,0.15) 0%,transparent 50%),var(--card-bg);padding:12px;width:153px;height:176px;transition:var(--transition);cursor:move;display:flex;flex-direction:column;align-items:center;justify-content:space-between;text-align:center;flex-shrink:0;border-radius:14px;border:2px solid transparent;opacity:0;box-shadow:0 6px 20px var(--shadow-color),inset 2px 2px 8px rgba(255,255,255,0.1),inset -2px -2px 8px rgba(0,0,0,0.1);}.config-box.dragging{opacity:0.5;transform:scale(0.95);z-index:1000;}.config-box:hover{transform:translateY(-5px) scale(1.05);box-shadow:0 12px 30px var(--shadow-color),0 0 30px rgba(0,0,0,0.3),inset 3px 3px 12px rgba(255,255,255,0.15),inset -3px -3px 12px rgba(0,0,0,0.15);background:linear-gradient(60deg,rgba(0,0,0,0.25) 0%,transparent 50%),var(--card-bg);}.config-box[data-protocol="hysteria2"]{border-color:var(--success-color);}.config-box[data-protocol="vless"]{border-color:var(--primary-color);}.config-box[data-protocol="trojan"]{border-color:var(--secondary-color);}.config-box[data-protocol="ss"]{border-color:var(--warning-color);}.config-box[data-protocol="vmess"]{border-color:var(--accent-color);}.config-box[data-protocol="wireguard"]{border-color:var(--dark-purple);}.config-box::after{content:attr(data-protocol-fa);position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:var(--card-bg);color:var(--text-light);font-size:0.85rem;padding:5px 10px;border-radius:10px;opacity:0;transition:var(--transition);pointer-events:none;box-shadow:0 4px 15px var(--shadow-color);white-space:nowrap;}.config-box:hover::after{opacity:1;}.config-logo-container{position:relative;width:65px;height:65px;display:flex;justify-content:center;align-items:center;background:transparent;margin-bottom:10px;font-size:2.5rem;}.config-logo{font-size:inherit;transition:var(--transition);background:transparent;}.config-box:hover .config-logo{transform:scale(1.15) rotate(5deg);}.ping-result{font-size:0.9rem;display:flex;align-items:center;gap:8px;width:100%;justify-content:center;font-weight:600;direction:rtl;transition:var(--transition);}.ping-result.fast{color:var(--success-color);}.ping-result.medium{color:var(--warning-color);}.ping-result.slow{color:var(--danger-color);}.error{background:var(--card-bg);color:var(--danger-color);border:1px solid rgba(255,0,0,0.4);border-radius:14px;padding:16px;margin:18px 0;font-size:0.95rem;text-align:center;box-shadow:0 4px 15px var(--shadow-color);}.loading-container{display:flex;align-items:center;justify-content:center;margin:20px 0;direction:rtl;min-height:50px;}.loading-dots{display:flex;justify-content:center;align-items:center;gap:10px;}.loading-dot{width:10px;height:10px;background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));border-radius:50%;animation:bounce 1.4s ease-in-out infinite;box-shadow:0 0 10px var(--shadow-color);}.loading-dot:nth-child(2){animation-delay:0.2s;}.loading-dot:nth-child(3){animation-delay:0.4s;}@keyframes bounce{0%,100%{transform:translateY(0);opacity:0.6;}50%{transform:translateY(-12px);opacity:1;}}.copy-btn{padding:10px;border-radius:12px;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:var(--text-white);font-size:0.9rem;font-weight:600;cursor:pointer;border:none;transition:var(--transition);display:flex;align-items:center;gap:8px;justify-content:center;width:100%;box-shadow:0 6px 20px var(--shadow-color);}.copy-btn i{font-size:1.2rem;color:var(--text-white);transition:var(--transition);}.copy-btn:hover{background:linear-gradient(135deg,var(--primary-dark),var(--primary-color));transform:translateY(-3px) scale(1.05);box-shadow:0 10px 25px var(--shadow-color);}.copy-btn:hover i{transform:scale(1.1);}.share-btn,.delete-btn{position:absolute;top:8px;padding:8px;border-radius:8px;background:linear-gradient(135deg,var(--secondary-color),var(--primary-dark));color:var(--text-white);font-size:0.85rem;font-weight:600;cursor:pointer;border:none;transition:var(--transition);display:flex;align-items:center;gap:6px;justify-content:center;box-shadow:0 4px 15px var(--shadow-color);}.share-btn{left:8px;}.delete-btn{right:8px;}.share-btn i,.delete-btn i{font-size:1.1rem;color:var(--text-white);transition:var(--transition);}.share-btn:hover,.delete-btn:hover{background:linear-gradient(135deg,var(--primary-dark),var(--secondary-color));transform:translateY(-2px) scale(1.1);box-shadow:0 8px 20px var(--shadow-color);}.share-btn:hover i,.delete-btn:hover i{transform:scale(1.2);}.filter-container{display:flex;gap:12px;margin-bottom:18px;overflow-x:auto;padding:12px;scrollbar-width:none;direction:rtl;border-bottom:1px solid var(--border-color);}.filter-container::-webkit-scrollbar{display:none;}.filter-btn{padding:8px 14px;border-radius:12px;background:#000000;color:#ffffff;font-size:0.85rem;font-weight:500;cursor:pointer;border:1px solid #ffffff;transition:var(--transition);box-shadow:0 4px 15px var(--shadow-color);white-space:nowrap;flex-shrink:0;}.filter-btn:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 8px 25px var(--shadow-color);background:#111111;}.filter-btn.active{background:#111111;border-color:#ffffff;}.filter-btn.inactive{cursor:default;pointer-events:none;opacity:0.5;}.filter-btn.inactive:hover{transform:none;box-shadow:0 4px 15px var(--shadow-color);}.report-problem-content{display:flex;flex-direction:column;gap:18px;padding:20px;height:100%;}.report-problem-content textarea{width:100%;min-height:100px;padding:12px;border-radius:10px;border:1px solid var(--border-color);background:var(--card-bg);color:var(--text-color);font-family:'Vazirmatn',sans-serif;font-size:0.9rem;resize:vertical;box-shadow:0 0 10px var(--shadow-color);transition:var(--transition);}.report-problem-content textarea:focus{outline:none;border-color:var(--primary-light);box-shadow:0 0 12px var(--shadow-color);}.report-problem-content button{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:var(--text-white);padding:14px;border-radius:12px;font-weight:700;cursor:pointer;border:none;transition:var(--transition);box-shadow:0 6px 20px var(--shadow-color);display:flex;align-items:center;justify-content:center;gap:8px;}.report-problem-content button i{font-size:1.2rem;color:var(--text-white);transition:var(--transition);}.report-problem-content button:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 10px 25px var(--shadow-color);}.report-problem-content button:hover i{transform:scale(1.1);}.report-problem-content button:disabled{opacity:0.6;cursor:not-allowed;transform:none;box-shadow:none;}.report-problem-content button .loading-spinner-small{display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:white;animation:spin 1s ease-in-out infinite;}@keyframes spin{to{transform:rotate(360deg);}}.source-content{display:flex;flex-direction:column;gap:18px;padding:20px;height:100%;}.source-content input{width:100%;min-height:40px;padding:12px;border-radius:10px;border:1px solid var(--border-color);background:var(--card-bg);color:var(--text-color);font-family:'Vazirmatn',sans-serif;font-size:0.9rem;box-shadow:0 0 10px var(--shadow-color);transition:var(--transition);}.source-content input:focus{outline:none;border-color:var(--primary-light);box-shadow:0 0 12px var(--shadow-color);}.source-content button{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:var(--text-white);padding:14px;border-radius:12px;font-weight:700;cursor:pointer;border:none;transition:var(--transition);box-shadow:0 6px 20px var(--shadow-color);display:flex;align-items:center;justify-content:center;gap:8px;}.source-content button i{font-size:1.2rem;color:var(--text-white);transition:var(--transition);}.source-content button:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 10px 25px var(--shadow-color);}.source-content button:hover i{transform:scale(1.1);}.source-content button:disabled{opacity:0.6;cursor:not-allowed;transform:none;box-shadow:none;}.source-content button .loading-spinner-small{display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:white;animation:spin 1s ease-in-out infinite;}@media (max-width:480px){.music-logo{width:220px;height:220px;}.music-logo .play-pause-icon{font-size:2.5rem;}.music-logo::after{width:55px;height:55px;}.music-logo::before{border-left:16px solid rgba(255,255,255,0.9);border-top:10px solid transparent;border-bottom:10px solid transparent;}}.notification{position:fixed;bottom:20px;right:20px;top:auto;left:auto;z-index:var(--z-index-notification);display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:12px;background:var(--card-bg);color:var(--text-color);box-shadow:0 8px 25px var(--shadow-color);transform:translateX(100%);opacity:0;transition:var(--transition);border:1px solid var(--border-color);width:auto;min-width:280px;max-width:90vw;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;hyphens:auto;}.notification.show{transform:translateX(0);opacity:1;}.notification-success{border-left:4px solid var(--success-color);}.notification-error{border-left:4px solid var(--danger-color);}.notification-info{border-left:4px solid var(--primary-color);}.notification-icon{font-size:1.2rem;min-width:20px;flex-shrink:0;}.notification-message{font-weight:600;flex:1;word-break:break-word;overflow-wrap:break-word;hyphens:auto;}@media (max-width:480px){.notification{bottom:10px;right:10px;padding:12px 16px;min-width:250px;max-width:calc(100vw - 20px);}.notification-icon{font-size:1rem;}.notification-message{font-size:0.9rem;}}</style><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head><body class="theme-default"><div class="loading-overlay" id="loadingOverlay"><img class="loading-hero" src="https://up.20script.ir/file/969f-InShot-Û²Û°Û²ÛµÛ°Û¹Û±Û¶-Û±Û·ÛµÛ´Û²Û°Û°Û¹Û².png" alt="Ø§ÛŒÚ©Ø³Ø±Ùˆ" loading="eager"><div class="loading-loader" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="loading-fill" id="loadingFill" role="img" aria-label="Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª"></div><div class="loading-label"><span>ÛŒØ¢Ù‡ÙÙ…ÙÙ‡â€Œ ÛŒØ¢ Ù‡ÛŒÚ† Ú©ÙØ³</span><span class="loading-percent" id="loadingPct" aria-live="polite">0%</span></div></div></div><audio id="bgMusic" loop preload="metadata"><source src="https://dl.musicdel.ir/Music/99/10/Music/Hamid%20Sefat%20%E2%80%93%20Satoori%20(64).mp3" type="audio/mpeg"></audio><audio id="buttonClickSound" preload="auto"><source src="https://sedatoseda.com/wp-content/uploads/interface-124464.mp3" type="audio/mpeg"></audio><audio id="generalClickSound" preload="auto"><source src="https://sedatoseda.com/wp-content/uploads/button-31.mp3" type="audio/mpeg"></audio><audio id="errorSound" preload="auto"><source src="https://sedatoseda.com/wp-content/uploads/error-warning-login-denied-132113.mp3" type="audio/mpeg"></audio><audio id="successSound" preload="auto"><source src="https://dl4.fara-download.ir/audio/sound_effect/alarms/check/Twitch%20Follower%20Alert%20Sound%20Effect%20SFX.mp3" type="audio/mpeg"></audio><div class="permanent-window" id="permanentWindow" role="main"><div class="top-bar" role="banner"><div class="logo" id="reportProblemBtn" role="button" tabindex="0" aria-label="Ú¯Ø²Ø§Ø±Ø´ Ù…Ø´Ú©Ù„"><i class="fas fa-bug" aria-hidden="true"></i><span>Ú¯Ø²Ø§Ø±Ø´ Ù…Ø´Ú©Ù„</span></div><div class="menu-btn" id="musicPanelBtn" role="button" tabindex="0" aria-label="Ù¾Ù†Ù„ Ù…ÙˆØ³ÛŒÙ‚ÛŒ"><i class="fas fa-music" aria-hidden="true"></i></div></div><div class="content"><div class="welcome-container"><div class="news-container" role="region" aria-label="Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒØ³ØªÙ…"><div class="news-content"><div class="info-box" role="group"><div class="info-icon"><i class="fas fa-laptop" aria-hidden="true"></i></div><div class="info-text">Ø³ÛŒØ³ØªÙ…:</div><div class="info-value" id="device" aria-live="polite">--</div></div><div class="info-box" role="group"><div class="info-icon"><i class="fas fa-map-marker-alt" aria-hidden="true"></i></div><div class="info-text">Ø¢ÛŒÙ¾ÛŒ:</div><div class="info-value" id="ip" aria-live="polite">--</div></div><div class="info-box" role="group"><div class="info-icon"><i class="fas fa-tachometer-alt" aria-hidden="true"></i></div><div class="info-text">Ù¾ÛŒÙ†Ú¯:</div><div class="info-value" id="ping" aria-live="polite">-- Ù…â€ŒØ«</div></div></div></div></div></div></div><button class="floating-btn" id="configSelectBtn" role="button" aria-label="Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯"><i class="fas fa-gift" aria-hidden="true"></i></button><div class="modal-overlay" id="configSelectOverlay" aria-hidden="true"></div><div class="modal-window public-shop-menu" id="publicShopMenu" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true"><div class="modal-header"><div class="modal-title-container"><i class="fas fa-sync-alt modal-title-img" id="modalTitleImg" role="button" tabindex="0" aria-label="Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§"></i><span class="modal-title" id="modalTitle">Ø§Ù†Ù‚Ø¶Ø§ ØªØ§ Û²Û´:Û°Û°:Û°Û°</span><span class="modal-progress-text" id="modalProgressText" style="display:none" aria-live="polite">Û° Ø§Ø² ... Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</span></div><div class="home-btn" id="closePublicShopMenu" role="button" tabindex="0" aria-label="Ø¨Ø³ØªÙ†"><i class="fas fa-times" aria-hidden="true"></i></div></div><div class="modal-content"><div class="modal-content-main"><div class="filter-container" id="filterContainer"><button class="filter-btn active" id="sourceBtn" role="button"><i class="fas fa-cloud-download-alt"></i> Ù…Ù†Ø¨Ø¹ Ù†Ù…Ø§</button><button class="filter-btn" id="copyAllBtn" role="button"><i class="fas fa-copy"></i> Ú©Ù¾ÛŒ Ù‡Ù…Ù‡</button></div><div class="tab-content active" id="source-tab" role="tabpanel"><div class="configs-container" id="sourceConfigsContainer" aria-live="polite"><div class="loading-container"><div class="loading-dots"><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div></div></div><div class="error" style="display:none" role="alert">Ù…ØªØ§Ø³ÙØ§Ù†Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</div></div></div><div class="config-content-bottom"><div class="config-source-section"><span class="freedom-text">Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¢Ø²Ø§Ø¯ Ø­Ù‚ Ù…Ø±Ø¯Ù… Ø§ÛŒØ±Ø§Ù† Ø§Ø³Øª</span></div></div></div></div><div class="modal-overlay" id="musicOverlay" aria-hidden="true"></div><div class="modal-window music-panel" id="musicPanel" role="dialog" aria-modal="true" aria-label="Ù¾Ù†Ù„ Ù…ÙˆØ³ÛŒÙ‚ÛŒ" aria-hidden="true"><div class="modal-content music-panel-content"><div class="music-logo-container"><img src="https://www.jowhareh.com/images/Jowhareh/galleries/large_a386cbed-ecf1-4dae-b850-d1902ad6c452.webp" alt="Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ" class="music-logo" id="musicLogo" loading="lazy"><div class="play-pause-icon" role="button" tabindex="0" aria-label="Ù¾Ø®Ø´/ØªÙˆÙ‚Ù Ù…ÙˆØ³ÛŒÙ‚ÛŒ"><i class="fas fa-play play-icon" aria-hidden="true"></i><i class="fas fa-pause pause-icon" aria-hidden="true"></i></div></div></div></div><div class="modal-overlay" id="reportProblemOverlay" aria-hidden="true"></div><div class="modal-window report-problem-menu" id="reportProblemMenu" role="dialog" aria-modal="true" aria-labelledby="reportProblemTitle" aria-hidden="true"><div class="modal-header"><div class="modal-title" id="reportProblemTitle">Ú¯Ø²Ø§Ø±Ø´ Ù…Ø´Ú©Ù„</div><div class="home-btn" id="closeReportProblemMenu" role="button" tabindex="0" aria-label="Ø¨Ø³ØªÙ†"><i class="fas fa-times" aria-hidden="true"></i></div></div><div class="modal-content report-problem-content"><textarea id="reportProblemText" placeholder="Ù…Ø´Ú©Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." aria-label="Ù…ØªÙ† Ú¯Ø²Ø§Ø±Ø´ Ù…Ø´Ú©Ù„" maxlength="1000"></textarea><button id="submitReportProblem" role="button"><i class="fas fa-comment-dots" aria-hidden="true"></i>Ø§Ø±Ø³Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´</button></div></div><div class="modal-overlay" id="sourceOverlay" aria-hidden="true"></div><div class="modal-window source-panel" id="sourcePanel" role="dialog" aria-modal="true" aria-labelledby="sourceTitle" aria-hidden="true"><div class="modal-header"><div class="modal-title" id="sourceTitle">Ù…Ù†Ø¨Ø¹ Ù†Ù…Ø§</div><div class="home-btn" id="closeSourcePanel" role="button" tabindex="0" aria-label="Ø¨Ø³ØªÙ†"><i class="fas fa-times" aria-hidden="true"></i></div></div><div class="modal-content source-content"><input type="url" id="sourceUrlInput" placeholder="Ù„ÛŒÙ†Ú© Ù…Ù†Ø¨Ø¹ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." aria-label="Ù„ÛŒÙ†Ú© Ù…Ù†Ø¨Ø¹ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§"><button id="submitSourceUrl" role="button"><i class="fas fa-save" aria-hidden="true"></i>Ø«Ø¨Øª</button></div></div><div class="notification" id="notification" role="alert" aria-live="assertive" aria-atomic="true"><div class="notification-icon" id="notificationIcon"><i class="fas fa-check-circle" aria-hidden="true"></i></div><div class="notification-message" id="notificationMessage">Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯</div></div><script>class XroVPN{constructor(){this.elements={};this.state={activeFilter:'source',modals:{},currentTab:'source'};this.cache={key:'xro_vpn_configs',expiry:24*60*60*1000};this.source={key:'xro_vpn_source_url',default:'https://raw.githubusercontent.com/darkvpnapp/CloudflarePlus/refs/heads/main/proxy'};this.currentProgress=0;this.expiryTimer=null;this.countryFlags={US:'ğŸ‡ºğŸ‡¸',GB:'ğŸ‡¬ğŸ‡§',DE:'ğŸ‡©ğŸ‡ª',FR:'ğŸ‡«ğŸ‡·',NL:'ğŸ‡³ğŸ‡±',SG:'ğŸ‡¸ğŸ‡¬',JP:'ğŸ‡¯ğŸ‡µ',KR:'ğŸ‡°ğŸ‡·',CA:'ğŸ‡¨ğŸ‡¦',AU:'ğŸ‡¦ğŸ‡º',RU:'ğŸ‡·ğŸ‡º',TR:'ğŸ‡¹ğŸ‡·',IR:'ğŸ‡®ğŸ‡·',AE:'ğŸ‡¦ğŸ‡ª',SA:'ğŸ‡¸ğŸ‡¦',IN:'ğŸ‡®ğŸ‡³',BR:'ğŸ‡§ğŸ‡·',CH:'ğŸ‡¨ğŸ‡­',SE:'ğŸ‡¸ğŸ‡ª',FI:'ğŸ‡«ğŸ‡®',NO:'ğŸ‡³ğŸ‡´',DK:'ğŸ‡©ğŸ‡°',IT:'ğŸ‡®ğŸ‡¹',ES:'ğŸ‡ªğŸ‡¸',PT:'ğŸ‡µğŸ‡¹',PL:'ğŸ‡µğŸ‡±',CZ:'ğŸ‡¨ğŸ‡¿',HU:'ğŸ‡­ğŸ‡º',AT:'ğŸ‡¦ğŸ‡¹',BE:'ğŸ‡§ğŸ‡ª',IE:'ğŸ‡®ğŸ‡ª',IL:'ğŸ‡®ğŸ‡±',ZA:'ğŸ‡¿ğŸ‡¦',MX:'ğŸ‡²ğŸ‡½',AR:'ğŸ‡¦ğŸ‡·',CL:'ğŸ‡¨ğŸ‡±',CO:'ğŸ‡¨ğŸ‡´',PE:'ğŸ‡µğŸ‡ª',VE:'ğŸ‡»ğŸ‡ª',EC:'ğŸ‡ªğŸ‡¨',UY:'ğŸ‡ºğŸ‡¾',PY:'ğŸ‡µğŸ‡¾',BO:'ğŸ‡§ğŸ‡´',CR:'ğŸ‡¨ğŸ‡·',PA:'ğŸ‡µğŸ‡¦',DO:'ğŸ‡©ğŸ‡´',GT:'ğŸ‡¬ğŸ‡¹',SV:'ğŸ‡¸ğŸ‡»',HN:'ğŸ‡­ğŸ‡³',NI:'ğŸ‡³ğŸ‡®',PR:'ğŸ‡µğŸ‡·',JM:'ğŸ‡¯ğŸ‡²',HT:'ğŸ‡­ğŸ‡¹',BS:'ğŸ‡§ğŸ‡¸',CU:'ğŸ‡¨ğŸ‡º',TT:'ğŸ‡¹ğŸ‡¹',GY:'ğŸ‡¬ğŸ‡¾',SR:'ğŸ‡¸ğŸ‡·',BZ:'ğŸ‡§ğŸ‡¿',KY:'ğŸ‡°ğŸ‡¾',BB:'ğŸ‡§ğŸ‡§',LC:'ğŸ‡±ğŸ‡¨',VC:'ğŸ‡»ğŸ‡¨',GD:'ğŸ‡¬ğŸ‡©',AG:'ğŸ‡¦ğŸ‡¬',DM:'ğŸ‡©ğŸ‡²',KN:'ğŸ‡°ğŸ‡³',MS:'ğŸ‡²ğŸ‡¸',TC:'ğŸ‡¹ğŸ‡¨',VG:'ğŸ‡»ğŸ‡¬',AI:'ğŸ‡¦ğŸ‡®',BM:'ğŸ‡§ğŸ‡²',FK:'ğŸ‡«ğŸ‡°',GI:'ğŸ‡¬ğŸ‡®',PN:'ğŸ‡µğŸ‡³',SH:'ğŸ‡¸ğŸ‡­',GS:'ğŸ‡¬ğŸ‡¸',PM:'ğŸ‡µğŸ‡²',WF:'ğŸ‡¼ğŸ‡«',TF:'ğŸ‡¹ğŸ‡«',PF:'ğŸ‡µğŸ‡«',NC:'ğŸ‡³ğŸ‡¨',VU:'ğŸ‡»ğŸ‡º',FJ:'ğŸ‡«ğŸ‡¯',TO:'ğŸ‡¹ğŸ‡´',WS:'ğŸ‡¼ğŸ‡¸',KI:'ğŸ‡°ğŸ‡®',TV:'ğŸ‡¹ğŸ‡»',NR:'ğŸ‡³ğŸ‡·',CK:'ğŸ‡¨ğŸ‡°',NU:'ğŸ‡³ğŸ‡º',TK:'ğŸ‡¹ğŸ‡°',default:'ğŸŒ'};this.init();}init(){this.cacheElements();this.bindEvents();this.initializeAudio();this.loadUIState();this.updateSystemInfo();this.startBackgroundTasks();this.showWelcome();this.initializeTabs();this.startExpiryTimer();this.extractConfigs(true);}cacheElements(){const selectors={loadingOverlay:'#loadingOverlay',permanentWindow:'#permanentWindow',musicPanelBtn:'#musicPanelBtn',musicPanel:'#musicPanel',musicOverlay:'#musicOverlay',configSelectBtn:'#configSelectBtn',publicShopMenu:'#publicShopMenu',configSelectOverlay:'#configSelectOverlay',sourcePanel:'#sourcePanel',sourceOverlay:'#sourceOverlay',sourceUrlInput:'#sourceUrlInput',submitSourceUrl:'#submitSourceUrl',closeSourcePanel:'#closeSourcePanel',notification:'#notification',notificationIcon:'#notificationIcon',notificationMessage:'#notificationMessage',bgMusic:'#bgMusic',buttonClickSound:'#buttonClickSound',generalClickSound:'#generalClickSound',errorSound:'#errorSound',successSound:'#successSound',configsContainer:'#sourceConfigsContainer',filterContainer:'#filterContainer',device:'#device',ip:'#ip',ping:'#ping',reportProblemBtn:'#reportProblemBtn',reportProblemMenu:'#reportProblemMenu',reportProblemOverlay:'#reportProblemOverlay',reportProblemText:'#reportProblemText',submitReportProblem:'#submitReportProblem',closeReportProblemMenu:'#closeReportProblemMenu',musicLogo:'#musicLogo',closePublicShopMenu:'#closePublicShopMenu',modalTitleImg:'#modalTitleImg',modalTitle:'#modalTitle',modalProgressText:'#modalProgressText',loadingFill:'#loadingFill',loadingPct:'#loadingPct',sourceBtn:'#sourceBtn',copyAllBtn:'#copyAllBtn'};Object.entries(selectors).forEach(([key,selector])=>{this.elements[key]=document.querySelector(selector);if(!this.elements[key])console.warn(`Element ${key} not found`);});}initializeTabs(){if(this.elements.sourceBtn)this.elements.sourceBtn.addEventListener('click',()=>{this.switchTab('source');});if(this.elements.copyAllBtn)this.elements.copyAllBtn.addEventListener('click',()=>{this.copyAllConfigs();});}copyAllConfigs(){this.playButtonSound();const configsContainer=this.elements.configsContainer;if(!configsContainer)return;const configBoxes=configsContainer.querySelectorAll('.config-box');if(configBoxes.length===0){this.showNotification('Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª','error');return;}const allConfigs=Array.from(configBoxes).map(box=>{const configData=box.dataset.config;try{return JSON.parse(configData).config;}catch{return null;}}).filter(Boolean);if(allConfigs.length===0){this.showNotification('Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø¹ØªØ¨Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† ÛŒØ§ÙØª Ù†Ø´Ø¯','error');return;}const configsText=allConfigs.join('\n\n---\n\n');navigator.clipboard.writeText(configsText).then(()=>{this.showNotification(`${allConfigs.length} Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯`,'success');}).catch(()=>{this.showNotification('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§','error');});}switchTab(tabName){this.state.currentTab=tabName;document.querySelectorAll('.filter-btn').forEach(btn=>btn.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(tab=>tab.style.display='none');const filterBtns=[this.elements.sourceBtn,this.elements.copyAllBtn];filterBtns.forEach((btn,i)=>{if(i===0&&tabName==='source'||i===1&&tabName==='copyAll'){btn.classList.add('active');}else{btn.classList.remove('active');}});if(tabName==='source'){document.getElementById('source-tab').style.display='block';this.elements.configsContainer=document.getElementById('sourceConfigsContainer');}else{this.elements.configsContainer.innerHTML='<div class="error" role="alert">Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯</div>';}this.playButtonSound();}bindEvents(){this.bindLoadingAnimation();this.bindModalEvents();this.bindSourceEvents();this.bindMusicEvents();this.bindConfigEvents();this.bindGlobalEvents();}bindLoadingAnimation(){const loadingOverlay=this.elements.loadingOverlay;if(!loadingOverlay)return;loadingOverlay.classList.add('show');requestAnimationFrame(()=>{setTimeout(()=>{const loadingFill=this.elements.loadingFill,loadingPct=this.elements.loadingPct;if(!loadingFill||!loadingPct)return;loadingFill.style.width='100%';const duration=3000,start=performance.now();const tick=now=>{const elapsed=Math.min(now-start,duration),p=Math.round((elapsed/duration)*100);loadingPct.textContent=`${p}%`;if(elapsed<duration)requestAnimationFrame(tick);else{loadingPct.textContent='100%';setTimeout(()=>{loadingOverlay.classList.add('fade-out');setTimeout(()=>{loadingOverlay.style.display='none';this.elements.permanentWindow.style.display='flex';},500);},1000);}};requestAnimationFrame(tick);},120);});}bindModalEvents(){const modals=[{btn:'configSelectBtn',modal:'publicShopMenu',overlay:'configSelectOverlay',close:'closePublicShopMenu'},{btn:'musicPanelBtn',modal:'musicPanel',overlay:'musicOverlay'},{btn:'reportProblemBtn',modal:'reportProblemMenu',overlay:'reportProblemOverlay',close:'closeReportProblemMenu'}];modals.forEach(({btn,modal,overlay,close})=>{if(this.elements[btn])this.elements[btn].addEventListener('click',()=>{this.playButtonSound();this.toggleModal(modal,true,overlay);if(close)this.bindCloseEvent(close,modal,overlay);});if(this.elements[overlay])this.elements[overlay].addEventListener('click',()=>{this.playGeneralSound();this.closeAllModals();});});if(this.elements.closeSourcePanel){this.elements.closeSourcePanel.addEventListener('click',()=>{this.playButtonSound();this.toggleModal('sourcePanel',false,'sourceOverlay');});}if(this.elements.modalTitleImg)this.elements.modalTitleImg.addEventListener('click',()=>{this.playButtonSound();this.elements.modalTitleImg.classList.add('active');setTimeout(()=>this.elements.modalTitleImg.classList.remove('active'),500);this.extractConfigs(true);});}bindCloseEvent(closeBtn,modalId,overlayId){if(this.elements[closeBtn])this.elements[closeBtn].addEventListener('click',()=>{this.playButtonSound();this.toggleModal(modalId,false,overlayId);});}bindSourceEvents(){if(this.elements.sourceBtn)this.elements.sourceBtn.addEventListener('click',()=>{this.playButtonSound();this.toggleModal('sourcePanel',true,'sourceOverlay');});}bindMusicEvents(){if(!this.elements.musicLogo||!this.elements.bgMusic)return;this.elements.musicLogo.addEventListener('click',()=>{this.togglePlayPause();});}bindConfigEvents(){if(this.elements.submitSourceUrl)this.elements.submitSourceUrl.addEventListener('click',()=>this.submitSourceUrl());if(this.elements.submitReportProblem)this.elements.submitReportProblem.addEventListener('click',()=>this.submitReportProblem());}bindGlobalEvents(){document.addEventListener('keydown',event=>{if(event.key==='Escape')this.closeAllModals();});}initializeAudio(){this.buttonClickSound=this.elements.buttonClickSound;this.generalClickSound=this.elements.generalClickSound;this.errorSound=this.elements.errorSound;this.successSound=this.elements.successSound;if(this.elements.bgMusic){this.elements.bgMusic.volume=0.3;this.elements.bgMusic.pause();}}playButtonSound(){if(this.buttonClickSound){this.buttonClickSound.currentTime=0;this.buttonClickSound.play().catch(err=>console.log('Button sound play failed:',err));}}playGeneralSound(){if(this.generalClickSound){this.generalClickSound.currentTime=0;this.generalClickSound.play().catch(err=>console.log('General sound play failed:',err));}}playErrorSound(){if(this.errorSound){this.errorSound.currentTime=0;this.errorSound.play().catch(err=>console.log('Error sound play failed:',err));}}playSuccessSound(){if(this.successSound){this.successSound.currentTime=0;this.successSound.play().catch(err=>console.log('Success sound play failed:',err));}}togglePlayPause(){if(!this.elements.bgMusic||!this.elements.musicLogo)return;const music=this.elements.bgMusic,logo=this.elements.musicLogo;if(music.paused){music.play().then(()=>{logo.classList.add('playing');logo.classList.remove('paused');logo.setAttribute('aria-label','ØªÙˆÙ‚Ù Ù…ÙˆØ³ÛŒÙ‚ÛŒ');this.showNotification('Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´','success');}).catch(()=>this.showNotification('Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒØŒ Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ ØµÙØ­Ù‡ ØªØ¹Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯','info'));}else{music.pause();logo.classList.remove('playing');logo.classList.add('paused');logo.setAttribute('aria-label','Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ');this.showNotification('Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù…ØªÙˆÙ‚Ù Ø´Ø¯','info');}}toggleModal(modalId,state,overlayId){if(!this.elements[modalId]||!this.elements[overlayId])return;this.closeAllModals();const modal=this.elements[modalId],overlay=this.elements[overlayId];if(state){modal.classList.add('open');overlay.classList.add('show');overlay.classList.remove('hidden');modal.setAttribute('aria-hidden','false');overlay.setAttribute('aria-hidden','false');}else{modal.classList.remove('open');overlay.classList.remove('show');overlay.classList.add('hidden');modal.setAttribute('aria-hidden','true');overlay.setAttribute('aria-hidden','true');}this.saveUIState();}closeAllModals(){['publicShopMenu','musicPanel','reportProblemMenu','sourcePanel'].forEach(id=>{if(this.elements[id])this.elements[id].classList.remove('open');});['configSelectOverlay','musicOverlay','reportProblemOverlay','sourceOverlay'].forEach(id=>{if(this.elements[id]){this.elements[id].classList.remove('show');this.elements[id].classList.add('hidden');}});this.saveUIState();}showNotification(message,type='success'){if(!this.elements.notification)return;this.elements.notification.className='notification';this.elements.notificationIcon.className='notification-icon';const icons={success:'<i class="fas fa-check-circle"></i>',error:'<i class="fas fa-times-circle"></i>',info:'<i class="fas fa-info-circle"></i>'};this.elements.notification.classList.add(`notification-${type}`);this.elements.notificationIcon.innerHTML=icons[type]||icons.success;this.elements.notificationMessage.textContent=message;if(type==='error'){this.playErrorSound();}else if(type==='success'){this.playSuccessSound();}this.elements.notification.classList.add('show');setTimeout(()=>this.elements.notification.classList.remove('show'),3000);}updateSystemInfo(){if(this.elements.device)this.elements.device.textContent=/Mobile|Android|iPhone|iPad/i.test(navigator.userAgent)?'Ù…ÙˆØ¨Ø§ÛŒÙ„':'Ø¯Ø³Ú©ØªØ§Ù¾';this.updateIP();this.updatePing();}updateIP(){if(!this.elements.ip)return;fetch('https://api.ipify.org?format=json',{cache:'no-store'}).then(res=>res.ok?res.json():Promise.reject('IP fetch failed')).then(data=>{if(this.elements.ip)this.elements.ip.textContent=this.toPersianDigits(data.ip);}).catch(()=>{if(this.elements.ip)this.elements.ip.textContent='Ù†Ø§Ù…Ø´Ø®Øµ';});}updatePing(){if(!this.elements.ping)return;const start=performance.now();fetch('https://cloudflare.com/cdn-cgi/trace',{method:'HEAD',cache:'no-store'}).then(()=>Math.round(performance.now()-start)).then(ping=>{if(this.elements.ping)this.elements.ping.textContent=`${this.toPersianDigits(ping.toString())} Ù…â€ŒØ«`;}).catch(()=>{if(this.elements.ping)this.elements.ping.textContent='Ù†Ø§Ù…Ø´Ø®Øµ';});}startBackgroundTasks(){setInterval(()=>this.updateIP(),10000);setInterval(()=>this.updatePing(),5000);setInterval(()=>this.refreshConfigPings(),10000);}showWelcome(){this.showNotification('Ø¨Ù‡ Ø§ÛŒÚ©Ø³Ø±Ùˆ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯','success');}toPersianDigits(str){return str.replace(/[0-9]/g,d=>'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'[parseInt(d)]);}getRemainingTime(){const cached=localStorage.getItem(this.cache.key);if(!cached)return 24*60*60*1000;try{const{data,timestamp,expiry}=JSON.parse(cached);const timeElapsed=Date.now()-timestamp;return Math.max(0,expiry-timeElapsed);}catch{return 24*60*60*1000;}}formatRemainingTime(milliseconds){const hours=Math.floor(milliseconds/(1000*60*60));const minutes=Math.floor((milliseconds%(1000*60*60))/(1000*60));const seconds=Math.floor((milliseconds%(1000*60))/(1000));const pad=(num)=>num.toString().padStart(2,'0');return`${this.toPersianDigits(pad(hours))}:${this.toPersianDigits(pad(minutes))}:${this.toPersianDigits(pad(seconds))}`;}updateExpiryDisplay(){if(!this.elements.modalTitle)return;const remainingTime=this.getRemainingTime();if(remainingTime>0){const formattedTime=this.formatRemainingTime(remainingTime);this.elements.modalTitle.textContent=`Ø§Ù†Ù‚Ø¶Ø§ ØªØ§ ${formattedTime}`;}else{this.elements.modalTitle.textContent='Ø§Ù†Ù‚Ø¶Ø§ Ù…ØªÙˆÙ‚Ù Ø´Ø¯ - Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ...';if(this.expiryTimer){clearInterval(this.expiryTimer);this.expiryTimer=null;}this.extractConfigs(true);}}startExpiryTimer(){if(this.expiryTimer)clearInterval(this.expiryTimer);this.updateExpiryDisplay();this.expiryTimer=setInterval(()=>{this.updateExpiryDisplay();},1000);}async submitSourceUrl(){this.playButtonSound();const input=this.elements.sourceUrlInput;if(!input)return;const url=input.value.trim();if(!url){this.showNotification('Ù„Ø·ÙØ§Ù‹ Ù„ÛŒÙ†Ú© Ù…Ù†Ø¨Ø¹ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error');return;}try{new URL(url);localStorage.setItem(this.source.key,url);this.showNotification('Ù„ÛŒÙ†Ú© Ù…Ù†Ø¨Ø¹ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯','success');input.value='';this.toggleModal('sourcePanel',false,'sourceOverlay');await this.extractConfigs(true);this.startExpiryTimer();}catch{this.showNotification('Ù„ÛŒÙ†Ú© Ù…Ù†Ø¨Ø¹ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª','error');}}async submitReportProblem(){this.playButtonSound();const textarea=this.elements.reportProblemText,btn=this.elements.submitReportProblem;if(!textarea||!btn)return;const message=textarea.value.trim();if(!message){this.showNotification('Ù„Ø·ÙØ§Ù‹ Ù…ØªÙ† Ú¯Ø²Ø§Ø±Ø´ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error');return;}const originalText=btn.innerHTML;btn.disabled=true;btn.innerHTML='<i class="fas fa-spinner loading-spinner-small" aria-hidden="true"></i> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';try{const token='YOUR_TELEGRAM_BOT_TOKEN',adminId='YOUR_ADMIN_ID';const response=await fetch(`https://api.telegram.org/bot${token}/sendMessage`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({chat_id:adminId,text:`Ú¯Ø²Ø§Ø±Ø´ Ù…Ø´Ú©Ù„ Ø¬Ø¯ÛŒØ¯:\n${message}`})});if(!response.ok)throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´');this.showNotification('Ú¯Ø²Ø§Ø±Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯','success');textarea.value='';this.toggleModal('reportProblemMenu',false,'reportProblemOverlay');}catch(error){this.showNotification(`Ø®Ø·Ø§: ${error.message}`,'error');}finally{btn.disabled=false;btn.innerHTML=originalText;}}parseConfig(config){try{const match=config.match(/^(hysteria2|vless|trojan|ss|vmess|wireguard):\/\/(.+)/i);if(!match)return null;const[,protocol,rest]=match;if(protocol.toLowerCase()==='vmess'){const data=JSON.parse(atob(rest.split('#')[0]));return data.add?{host:data.add,protocol}:null;}if(protocol.toLowerCase()==='wireguard'){const data=JSON.parse(rest.split('#')[0]);return data.Address?{host:data.Address,protocol}:null;}const host=rest.split('#')[0].split('?')[0].match(/@([^:@]+)/)?.[1];return/^[a-zA-Z0-9.-]+$/.test(host)?{host,protocol}:null;}catch{return null;}}formatConfig(config){try{const match=config.match(/^([^:]+):\/\/(.+)/i);if(!match)return config;const[,protocol,rest]=match;if(protocol.toLowerCase()==='vmess'){const[base,...comment]=rest.split('#');const data=JSON.parse(atob(base));data.ps='insta â˜œâ˜ aminxro';return`vmess://${btoa(JSON.stringify(data))}${comment.length?'#'+comment.join('#'):''}`;}if(protocol.toLowerCase()==='wireguard'){const[base,...comment]=rest.split('#');const data=JSON.parse(base);data.ps='insta â˜œâ˜ aminxro';return`wireguard://${JSON.stringify(data)}${comment.length?'#'+comment.join('#'):''}`;}if(['vless','trojan','ss'].includes(protocol.toLowerCase())){const[base,...comment]=rest.split('#');return comment.length?`${protocol}://${base}#insta â˜œâ˜ aminxro`:config;}return config;}catch{return config;}}async testPing(host){return new Promise(resolve=>{const start=performance.now(),controller=new AbortController(),timeout=setTimeout(()=>controller.abort(),5000);fetch(`https://${host}/generate_204`,{method:'HEAD',mode:'no-cors',signal:controller.signal,cache:'no-store'}).then(()=>{clearTimeout(timeout);resolve({success:true,ping:Math.round(performance.now()-start)});}).catch(err=>{clearTimeout(timeout);resolve({success:false,error:err.name==='AbortError'?'ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª':'Ø¹Ø¯Ù… Ø§ØªØµØ§Ù„'});});});}async getLocation(host){try{const response=await fetch(`http://ip-api.com/json/${host}?fields=countryCode`,{cache:'no-store'});if(!response.ok)return null;const data=await response.json();return data.countryCode?{countryCode:data.countryCode.toUpperCase()}:null;}catch{return null;}}getCachedConfigs(){try{const cached=localStorage.getItem(this.cache.key);if(!cached)return null;const{data,timestamp,expiry}=JSON.parse(cached);const timeElapsed=Date.now()-timestamp;if(timeElapsed>this.cache.expiry){localStorage.removeItem(this.cache.key);this.showNotification('Ú©Ø´ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯ØŒ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ...','info');return null;}return data;}catch{localStorage.removeItem(this.cache.key);return null;}}setCachedConfigs(data){try{localStorage.setItem(this.cache.key,JSON.stringify({data,timestamp:Date.now(),expiry:this.cache.expiry,cachedAt:new Date().toLocaleString('fa-IR')}));this.showNotification('Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ø´ Ø´Ø¯ (Û²Û´ Ø³Ø§Ø¹Øª)','success');this.startExpiryTimer();}catch(error){console.error('Cache save error:',error);}}deleteConfig(config){const cachedConfigs=this.getCachedConfigs();if(cachedConfigs){const updatedConfigs=cachedConfigs.filter(c=>c.config!==config);this.setCachedConfigs(updatedConfigs);this.renderConfigs(updatedConfigs);this.showNotification('Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯','success');}}saveUIState(){try{const state={isPublicShopMenuOpen:!!this.elements.publicShopMenu?.classList.contains('open'),isMusicPanelOpen:!!this.elements.musicPanel?.classList.contains('open'),isReportProblemMenuOpen:!!this.elements.reportProblemMenu?.classList.contains('open'),isSourcePanelOpen:!!this.elements.sourcePanel?.classList.contains('open'),currentTab:this.state.currentTab};sessionStorage.setItem('xro_vpn_ui_state',JSON.stringify(state));}catch{}}loadUIState(){try{const state=sessionStorage.getItem('xro_vpn_ui_state');if(!state)return;const{isPublicShopMenuOpen,isMusicPanelOpen,isReportProblemMenuOpen,isSourcePanelOpen,currentTab}=JSON.parse(state);this.state.currentTab=currentTab||'source';if(isPublicShopMenuOpen&&this.elements.publicShopMenu&&this.elements.configSelectOverlay){this.toggleModal('publicShopMenu',true,'configSelectOverlay');setTimeout(()=>{this.switchTab(this.state.currentTab);},100);}if(isMusicPanelOpen&&this.elements.musicPanel&&this.elements.musicOverlay)this.toggleModal('musicPanel',true,'musicOverlay');if(isReportProblemMenuOpen&&this.elements.reportProblemMenu&&this.elements.reportProblemOverlay)this.toggleModal('reportProblemMenu',true,'reportProblemOverlay');if(isSourcePanelOpen&&this.elements.sourcePanel&&this.elements.sourceOverlay)this.toggleModal('sourcePanel',true,'sourceOverlay');}catch{}}updateProgress(current,total){if(!this.elements.modalProgressText||!this.elements.modalTitle)return;this.currentProgress=current;this.elements.modalTitle.style.display='none';this.elements.modalProgressText.style.display='inline';this.elements.modalProgressText.textContent=`${this.toPersianDigits(current.toString())} Ø§Ø² ${this.toPersianDigits(total.toString())} Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡`;if(current>=total){setTimeout(()=>{this.elements.modalProgressText.style.display='none';this.elements.modalTitle.style.display='inline';this.currentProgress=0;},1000);}}async shareConfig(config){this.playButtonSound();if(navigator.share){try{await navigator.share({title:'Ú©Ø§Ù†ÙÛŒÚ¯ VPN Ø§ÛŒÚ©Ø³Ø±Ùˆ',text:'Ú©Ø§Ù†ÙÛŒÚ¯ VPN Ø§Ø² Ø§ÛŒÚ©Ø³Ø±Ùˆ',url:config});this.showNotification('Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø°Ø§Ø´ØªÙ‡ Ø´Ø¯','success');}catch{this.showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯','error');}}else{this.showNotification('Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ù…Ø±ÙˆØ±Ú¯Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯','error');}}async updateConfigPing(config,pingElement){try{if(!config||!pingElement)return;const parsed=this.parseConfig(config.config);if(!parsed)return;const pingResult=await this.testPing(parsed.host);if(pingResult.success){pingElement.textContent=`${this.toPersianDigits(pingResult.ping.toString())} Ù…â€ŒØ«`;pingElement.className='ping-result';pingElement.classList.add(pingResult.ping<300?'fast':pingResult.ping<600?'medium':'slow');}else{pingElement.textContent='Ù†Ø§Ù…Ø´Ø®Øµ';pingElement.className='ping-result slow';}}catch{console.error('Config ping error');if(pingElement){pingElement.textContent='Ù†Ø§Ù…Ø´Ø®Øµ';pingElement.className='ping-result slow';}}}refreshConfigPings(){if(!this.elements.configsContainer)return;const configBoxes=this.elements.configsContainer.querySelectorAll('.config-box');if(configBoxes.length===0)return;configBoxes.forEach(box=>{const config=box.dataset.config,pingElement=box.querySelector('.ping-result');if(config&&pingElement){try{this.updateConfigPing(JSON.parse(config),pingElement);}catch{}}});}getCountryFlag(countryCode){return this.countryFlags[countryCode]||this.countryFlags.default;}async extractConfigs(forceRefresh=false){if(!this.elements.configsContainer)return;this.currentProgress=0;if(!forceRefresh&&this.getRemainingTime()>0){const cachedConfigs=this.getCachedConfigs();if(cachedConfigs){this.updateProgress(cachedConfigs.length,cachedConfigs.length);this.renderConfigs(cachedConfigs);return;}}this.elements.configsContainer.innerHTML='<div class="loading-container"><div class="loading-dots"><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div></div></div>';try{const url=localStorage.getItem(this.source.key)||this.source.default;const response=await fetch(url,{mode:'cors',cache:'no-store'});if(!response.ok){this.elements.configsContainer.innerHTML='<div class="error" role="alert">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§</div>';this.showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§: Ø³Ø±ÙˆØ± Ù¾Ø§Ø³Ø® Ù†Ø¯Ø§Ø¯','error');return;}const textContent=await response.text();let configs=textContent.split(/[\n\r]+/).map(c=>c.trim()).filter(Boolean);if(!configs.length){this.elements.configsContainer.innerHTML='<div class="error" role="alert">Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>';this.showNotification('Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ÛŒ Ø¯Ø± ÙØ§ÛŒÙ„ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª','error');return;}const totalConfigs=configs.length,validConfigs=[],batchSize=10;for(let i=0;i<configs.length;i+=batchSize){const batch=configs.slice(i,i+batchSize),results=await Promise.all(batch.map(async config=>{try{const formattedConfig=this.formatConfig(config),parsed=this.parseConfig(config);if(!parsed)return null;const pingResult=await this.testPing(parsed.host);this.updateProgress(++this.currentProgress,totalConfigs);if(!pingResult.success||pingResult.ping>600)return null;const location=await this.getLocation(parsed.host);return{config:formattedConfig,ping:pingResult.ping,protocol:parsed.protocol,countryCode:location?.countryCode||null};}catch{return null;}}));validConfigs.push(...results.filter(Boolean));}if(!validConfigs.length){this.elements.configsContainer.innerHTML='<div class="error" role="alert">Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø¹ØªØ¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>';this.showNotification('Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ø¹ØªØ¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯','error');return;}this.setCachedConfigs(validConfigs);this.renderConfigs(validConfigs);this.updateProgress(this.currentProgress,totalConfigs);}catch(error){this.elements.configsContainer.innerHTML='<div class="error" role="alert">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§</div>';this.showNotification(`Ø®Ø·Ø§: ${error.message}`,'error');console.error('Config fetch error:',error);}}renderConfigs(configs){if(!this.elements.configsContainer)return;this.elements.configsContainer.innerHTML='';if(!configs||configs.length===0){this.elements.configsContainer.innerHTML='<div class="error" role="alert">Ù‡ÛŒÚ† Ú©Ø§Ù†ÙÛŒÚ¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</div>';return;}const protocolNames={'hysteria2':'Ù‡ÛŒØ³ØªØ±ÛŒØ§Û²','vless':'ÙˆÛŒâ€ŒÙ„Ø³','trojan':'ØªØ±ÙˆØ¬Ø§Ù†','ss':'Ø´Ø¯ÙˆØ³Ø§Ú©Ø³','vmess':'ÙˆÛŒâ€ŒÙ…Ø³','wireguard':'ÙˆØ§ÛŒØ±Ú¯Ø§Ø±Ø¯'};configs.sort((a,b)=>a.ping-b.ping).forEach((config,i)=>{const box=document.createElement('div');box.className='config-box';box.draggable=true;box.style.opacity='0';box.style.animation=`slideInRight 0.6s ease-out ${i*0.1}s forwards`;box.dataset.protocol=config.protocol.toLowerCase();box.dataset.protocolFa=protocolNames[config.protocol.toLowerCase()]||config.protocol;box.dataset.config=JSON.stringify(config);box.setAttribute('role','button');box.setAttribute('tabindex','0');const pingClass=config.ping<300?'fast':config.ping<600?'medium':'slow',countryFlag=this.getCountryFlag(config.countryCode);box.innerHTML=`<button class="share-btn" aria-label="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ"><i class="fas fa-share-square" aria-hidden="true"></i></button><button class="delete-btn" aria-label="Ø­Ø°Ù"><i class="fas fa-trash" aria-hidden="true"></i></button><div class="config-logo-container" aria-hidden="true"><span class="config-logo">${countryFlag}</span></div><div class="ping-result ${pingClass}" aria-live="polite"><i class="fas fa-tachometer-alt" aria-hidden="true"></i> ${this.toPersianDigits(config.ping.toString())} Ù…â€ŒØ«</div><button class="copy-btn" aria-label="Ú©Ù¾ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯"><i class="fas fa-clipboard" aria-hidden="true"></i> Ú©Ù¾ÛŒ</button>`;const copyBtn=box.querySelector('.copy-btn'),shareBtn=box.querySelector('.share-btn'),deleteBtn=box.querySelector('.delete-btn');if(copyBtn)copyBtn.addEventListener('click',e=>{e.stopPropagation();this.playButtonSound();navigator.clipboard.writeText(config.config).then(()=>this.showNotification('Ú©Ø§Ù†ÙÛŒÚ¯ Ú©Ù¾ÛŒ Ø´Ø¯','success')).catch(()=>this.showNotification('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ú©Ø§Ù†ÙÛŒÚ¯','error'));});if(shareBtn)shareBtn.addEventListener('click',e=>{e.stopPropagation();this.playButtonSound();this.shareConfig(config.config);});if(deleteBtn)deleteBtn.addEventListener('click',e=>{e.stopPropagation();this.playButtonSound();box.remove();this.deleteConfig(config.config);});let holdTimeout;const startDrag=()=>{holdTimeout=setTimeout(()=>box.classList.add('dragging'),3000);},endDrag=()=>{clearTimeout(holdTimeout);box.classList.remove('dragging');};['mousedown','touchstart'].forEach(event=>box.addEventListener(event,startDrag));['mouseup','mouseleave','touchend','touchcancel'].forEach(event=>box.addEventListener(event,endDrag));box.addEventListener('dragstart',ev=>{ev.dataTransfer.setData('text/plain',JSON.stringify(config));box.classList.add('dragging');});box.addEventListener('dragend',()=>box.classList.remove('dragging'));box.addEventListener('click',e=>{if(!e.target.closest('button')){this.playButtonSound();navigator.clipboard.writeText(config.config).then(()=>this.showNotification('Ú©Ø§Ù†ÙÛŒÚ¯ Ú©Ù¾ÛŒ Ø´Ø¯','success')).catch(()=>this.showNotification('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ú©Ø§Ù†ÙÛŒÚ¯','error'));}});this.elements.configsContainer.appendChild(box);});if(this.elements.configsContainer){this.elements.configsContainer.addEventListener('dragover',ev=>ev.preventDefault());this.elements.configsContainer.addEventListener('drop',ev=>{ev.preventDefault();const draggedData=ev.dataTransfer.getData('text/plain');try{const draggedConfig=JSON.parse(draggedData),configBoxes=Array.from(this.elements.configsContainer.querySelectorAll('.config-box')),draggedBox=configBoxes.find(box=>JSON.parse(box.dataset.config).config===draggedConfig.config),dropBox=ev.target.closest('.config-box');if(draggedBox&&dropBox&&draggedBox!==dropBox){const cachedConfigs=this.getCachedConfigs();if(cachedConfigs){const draggedIndex=cachedConfigs.findIndex(c=>c.config===draggedConfig.config),dropIndex=configBoxes.findIndex(box=>box===dropBox),updatedConfigs=[...cachedConfigs];updatedConfigs.splice(draggedIndex,1);updatedConfigs.splice(dropIndex,0,draggedConfig);this.setCachedConfigs(updatedConfigs);this.renderConfigs(updatedConfigs);}}}catch{}}); }this.saveUIState();this.refreshConfigPings();}}new XroVPN();</script></body></html>
