پ>lang="fa" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>فروشگاه VPN - ایکسرو</title><style>:root {--primary-color: #4361ee; --primary-dark: #3a56d4; --primary-light: #627efe; --secondary-color: #7209b7; --accent-color: #f72585; --success-color: #4cc9f0; --warning-color: #f9c74f; --danger-color: #f94144; --dark-blue: #1a237e; --dark-purple: #4a148c; --text-color: #e6e8ff; --text-light: #a3a7e4; --bg-color: #0d1117; --card-bg: #161b22; --card-hover: #1d2430; --border-color: rgba(67, 97, 238, 0.3); --shadow-color: rgba(58, 86, 212, 0.3); --glass-effect: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(114, 9, 183, 0.15)); --glass-border: 1px solid rgba(67, 97, 238, 0.2); --glass-shadow: 0 10px 30px rgba(58, 86, 212, 0.3); --transition: all .3s cubic-bezier(.4,0,.2,1); --bg-image: url('https://biaupload.com/do.php?imgf=org-adcb3c9c5c972.png'); --overlay-image: url('https://biaupload.com/do.php?imgf=org-ee8b030e7b561.png'); --glow-effect: 0 0 15px rgba(67, 97, 238, 0.4), 0 0 30px rgba(114, 9, 183, 0.2);} * {box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent;} body {font-family: 'Vazirmatn', 'Segoe UI', sans-serif; background: var(--bg-color); color: var(--text-color); height: 100vh; overflow: hidden; user-select: none; touch-action: manipulation; position: relative;} .permanent-window {position: fixed; inset: 0; z-index: 10; background: var(--bg-image) center/cover fixed, var(--glass-effect); background-blend-mode: overlay; backdrop-filter: blur(20px); border: var(--glass-border); box-shadow: var(--glass-shadow); display: flex; flex-direction: column; overflow: hidden; animation: fadeIn 1s ease-out;} .permanent-window::after {content: ''; position: absolute; inset: 0; background: var(--overlay-image) center/cover no-repeat; opacity: 0; animation: fadeInOut 6s ease-in-out infinite; z-index: -1;} @keyframes fadeInOut {0%, 100% {opacity: 0;} 50% {opacity: 0.3;}} .permanent-window::before {content: ''; position: absolute; inset: 0; background: linear-gradient(45deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1), rgba(247, 37, 133, 0.1)); opacity: 0.2; animation: pulse 8s ease-in-out infinite;} @keyframes pulse {0%, 100% {opacity: 0.2;} 50% {opacity: 0.4;}} .top-bar {display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); border-bottom: var(--glass-border); box-shadow: 0 4px 20px var(--shadow-color); backdrop-filter: blur(15px); z-index: 100;} .logo {font-size: 1.3rem; font-weight: 700; padding: 12px 18px; border-radius: 12px; cursor: pointer; background: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(114, 9, 183, 0.15)); display: flex; align-items: center; gap: 12px; transition: var(--transition); border: 1px solid var(--border-color); box-shadow: var(--glow-effect); color: var(--text-color);} .logo:hover {background: linear-gradient(135deg, rgba(67, 97, 238, 0.25), rgba(114, 9, 183, 0.25)); transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px var(--shadow-color);} .menu-btn {width: 44px; height: 44px; display: flex; flex-direction: column; justify-content: space-around; align-items: center; padding: 10px; border-radius: 12px; transition: var(--transition); background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); border: 1px solid var(--border-color); cursor: pointer; box-shadow: var(--glow-effect);} .menu-btn:hover {background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); transform: rotate(90deg) scale(1.1); box-shadow: 0 8px 20px var(--shadow-color);} .menu-line {width: 100%; height: 4px; background: var(--text-color); border-radius: 3px; transition: var(--transition);} .menu-btn:hover .menu-line {background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));} .content {height: calc(100vh - 70px); display: flex; flex-direction: column; padding: 20px; overflow: hidden;} .welcome-container {flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: -20px;} .news-container {width: 100%; max-width: 90%; padding: 12px; border-radius: 16px; text-align: center; background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); box-shadow: var(--glow-effect); backdrop-filter: blur(10px); border: 1px solid var(--border-color);} .news-content {color: var(--text-light); font-size: 0.95rem; text-align: right;} .info-box {background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); border-radius: 14px; padding: 14px; margin-bottom: 12px; display: flex; align-items: center; gap: 12px; opacity: 0; border: 1px solid var(--primary-color); box-shadow: 0 4px 15px var(--shadow-color);} .info-box:nth-child(1) {animation: slideInLeft 0.6s ease-out 0.2s forwards;} .info-box:nth-child(2) {animation: slideInRight 0.6s ease-out 0.4s forwards;} .info-box:nth-child(3) {animation: slideInLeft 0.6s ease-out 0.6s forwards;} @keyframes slideInRight {from {opacity: 0; transform: translateX(50px);} to {opacity: 1; transform: translateX(0);}} @keyframes slideInLeft {from {opacity: 0; transform: translateX(-50px);} to {opacity: 1; transform: translateX(0);}} .info-icon {font-size: 1.4rem; color: var(--primary-color); min-width: 32px; display: flex; justify-content: center;} .info-text {font-weight: 600; min-width: 60px; color: var(--warning-color);} .info-value {font-weight: 600; min-width: 60px; flex: 1; text-align: left; direction: ltr; background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color)); background-size: 200% auto; -webkit-background-clip: text; background-clip: text; color: transparent; animation: gradientAnimation 3s ease infinite;} @keyframes gradientAnimation {0% {background-position: 0% 50%;} 50% {background-position: 100% 50%;} 100% {background-position: 0% 50%;}} .floating-btn {position: fixed; bottom: 15px; left: 15px; width: 65px; height: 65px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); border-radius: 18px; display: flex; justify-content: center; align-items: center; font-size: 26px; color: var(--text-color); box-shadow: 0 10px 30px var(--shadow-color); cursor: pointer; border: none; transition: var(--transition); z-index: 100;} .floating-btn:hover {transform: translateY(-5px) scale(1.1); box-shadow: 0 15px 40px var(--shadow-color); background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));} .modal-window {position: fixed; background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); z-index: 1000; transition: var(--transition); box-shadow: 0 12px 40px var(--shadow-color); border: var(--glass-border); backdrop-filter: blur(20px); border-radius: 18px; display: flex; flex-direction: column; max-height: 80vh;} .main-menu, .settings-panel, .about-panel, .report-problem-menu {top: -100%; right: 0; width: 100%; max-height: 65%; border-radius: 0 0 18px 18px;} .main-menu.open, .settings-panel.open, .about-panel.open, .report-problem-menu.open {top: 0;} .public-shop-menu {bottom: -100%; left: 0; width: 100%; max-height: 80%; border-radius: 18px 18px 0 0;} .public-shop-menu.open {bottom: 0;} .modal-overlay {position: fixed; inset: 0; background: rgba(13, 17, 23, 0.7); z-index: 999; display: none; transition: opacity .3s ease;} .modal-overlay.show {display: block; opacity: 1;} .modal-overlay.hidden {opacity: 0;} .loading-window {position: fixed; inset: 0; background: url('https://biaupload.com/do.php?imgf=org-08678b2cf3b81.png') center/cover; z-index: 2000; display: flex; flex-direction: column; justify-content: flex-end; align-items: center;} .loading-window::after {content: ''; position: absolute; inset: 0; background: url('https://biaupload.com/do.php?imgf=org-380b798a2fcd2.png') center/cover; opacity: 0; animation: fadeInOut 3s ease-in-out infinite;} .loading-window.hidden {display: none; opacity: 0;} .loading-content {position: absolute; bottom: 40px; display: flex; flex-direction: column; align-items: center; gap: 10px;} .loading-messages {width: 100%; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: var(--text-color); white-space: nowrap;} .loading-messages span {position: static; opacity: 1;} .loading-spinner {width: 50px; height: 50px; background: url('https://biaupload.com/do.php?imgf=org-0e160aa5093e1.png') center/cover; border-radius: 50%; position: relative; animation: spin 2s linear infinite; background-color: transparent;} .loading-frame {width: 62px; height: 62px; background: url('https://biaupload.com/do.php?imgf=org-14607935dcc21.png') center/contain no-repeat; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1; background-color: transparent;} .loading-footer {font-size: 1.3rem; color: var(--warning-color);} .modal-header {display: flex; justify-content: space-between; align-items: center; padding: 18px 20px; border-bottom: var(--glass-border); background: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(114, 9, 183, 0.15)); box-shadow: 0 4px 15px var(--shadow-color);} .modal-title-container {display: flex; align-items: center; gap: 10px;} .modal-title {font-weight: 700; font-size: 1.3rem; color: var(--text-color);} .modal-title-img {width: 30px; height: 30px; cursor: pointer; object-fit: contain; border-radius: 50%; box-shadow: 0 0 10px var(--shadow-color); transition: transform .3s ease; background: transparent; image-rendering: auto;} .modal-title-img:hover {transform: scale(1.2);} .home-btn {cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: var(--transition); background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1));} .home-btn:hover {background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); transform: scale(1.1); box-shadow: 0 6px 20px var(--shadow-color);} .home-btn img {width: 26px; height: 26px; object-fit: contain; border-radius: 50%; transition: transform .3s ease; background: transparent; image-rendering: auto;} .home-btn:hover img {transform: scale(1.2);} .modal-content {flex: 1; overflow-y: auto; padding: 12px; background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); backdrop-filter: blur(10px);} .menu-item {padding: 18px; margin-bottom: 14px; background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); border-radius: 16px; cursor: pointer; transition: var(--transition); border: 1px solid var(--border-color); box-shadow: 0 6px 20px var(--shadow-color);} .menu-item:hover {transform: translateY(-4px) scale(1.02); background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); border-color: var(--primary-light); box-shadow: 0 12px 30px var(--shadow-color);} .menu-item-title {font-weight: 700; font-size: 1.2rem; display: flex; align-items: center; gap: 12px; color: var(--text-color);} .menu-item-title i {color: var(--primary-color); font-size: 1.4rem;} .menu-item-desc {font-size: 0.95rem; color: var(--text-light); line-height: 1.6;} .notification {position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(114, 9, 183, 0.15)); border-radius: 14px; padding: 14px; box-shadow: 0 8px 25px var(--shadow-color); z-index: 1100; transform: translateY(100px); opacity: 0; transition: var(--transition); display: flex; align-items: center; gap: 12px; border: 1px solid var(--border-color); max-width: 80%; backdrop-filter: blur(12px);} .notification.show {transform: translateY(0); opacity: 1;} .notification-icon {font-size: 1.4rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: 50%; box-shadow: 0 0 10px var(--shadow-color);} .notification-success {background: linear-gradient(135deg, rgba(76, 201, 240, 0.2), rgba(67, 97, 238, 0.2)); color: var(--success-color); border: 1px solid rgba(76, 201, 240, 0.4);} .notification-info {background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); color: var(--primary-color); border: 1px solid var(--border-color);} .notification-error {background: linear-gradient(135deg, rgba(249, 65, 68, 0.2), rgba(67, 97, 238, 0.2)); color: var(--danger-color); border: 1px solid rgba(249, 65, 68, 0.4);} .notification-message {font-size: 0.9rem; font-weight: 500; flex: 1; color: var(--text-color);} .configs-container {display: flex; gap: 12px; overflow-x: auto; padding: 12px; direction: rtl; scrollbar-width: none;} .configs-container::-webkit-scrollbar {display: none;} .config-box {position: relative; background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); padding: 12px; width: 153px; height: 176px; transition: var(--transition); cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: space-between; text-align: center; flex-shrink: 0; border-radius: 14px; border: 2px solid transparent; opacity: 0; box-shadow: 0 6px 20px var(--shadow-color);} .config-box:hover {transform: translateY(-5px) scale(1.05); box-shadow: 0 12px 30px var(--shadow-color);} .config-box[data-protocol="hysteria2"] {border-color: var(--success-color);} .config-box[data-protocol="vless"] {border-color: var(--primary-color);} .config-box[data-protocol="trojan"] {border-color: var(--secondary-color);} .config-box[data-protocol="ss"] {border-color: var(--warning-color);} .config-box[data-protocol="vmess"] {border-color: var(--accent-color);} .config-box[data-protocol="wireguard"] {border-color: var(--dark-purple);} .config-box::after {content: attr(data-protocol); position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2)); color: var(--text-light); font-size: 0.85rem; padding: 5px 10px; border-radius: 10px; opacity: 0; transition: var(--transition); pointer-events: none; box-shadow: 0 4px 15px var(--shadow-color);} .config-box:hover::after {opacity: 1;} .config-logo-container {position: relative; width: 65px; height: 65px; display: flex; justify-content: center; align-items: center; background: transparent;} .config-logo {width: 55px; height: 55px; margin-bottom: 10px; object-fit: contain; border-radius: 50%; transition: transform .3s ease; box-shadow: 0 0 15px var(--shadow-color); background: transparent; image-rendering: auto;} .config-box:hover .config-logo {transform: scale(1.15) rotate(5deg);} .ping-result {font-size: 0.9rem; display: flex; align-items: center; gap: 8px; width: 100%; justify-content: center; font-weight: 600; direction: rtl;} .ping-result.fast {color: var(--success-color);} .ping-result.medium {color: var(--warning-color);} .ping-result.slow {color: var(--danger-color);} .error {background: linear-gradient(135deg, rgba(249, 65, 68, 0.2), rgba(67, 97, 238, 0.2)); color: var(--danger-color); border: 1px solid rgba(249, 65, 68, 0.4); border-radius: 14px; padding: 16px; margin: 18px 0; font-size: 0.95rem; text-align: center; box-shadow: 0 4px 15px var(--shadow-color);} .loading-container {display: flex; align-items: center; justify-content: center; margin: 20px 0; direction: rtl;} .loading-dots {display: flex; justify-content: center; align-items: center; gap: 10px;} .loading-dot {width: 10px; height: 10px; background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); border-radius: 50%; animation: bounce 1.4s ease-in-out infinite; box-shadow: 0 0 10px var(--shadow-color);} .loading-dot:nth-child(2) {animation-delay: 0.2s;} .loading-dot:nth-child(3) {animation-delay: 0.4s;} @keyframes bounce {0%, 100% {transform: translateY(0); opacity: 0.6;} 50% {transform: translateY(-12px); opacity: 1;}} .copy-btn {padding: 10px; border-radius: 12px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: var(--text-color); font-size: 0.9rem; font-weight: 600; cursor: pointer; border: none; transition: var(--transition); display: flex; align-items: center; gap: 8px; justify-content: center; width: 100%; box-shadow: 0 6px 20px var(--shadow-color);} .copy-btn:hover {background: linear-gradient(135deg, var(--primary-dark), var(--primary-color)); transform: translateY(-3px) scale(1.05); box-shadow: 0 10px 25px var(--shadow-color);} .share-btn {position: absolute; top: 8px; left: 8px; padding: 8px; border-radius: 8px; background: linear-gradient(135deg, var(--secondary-color), var(--primary-dark)); color: var(--text-color); font-size: 0.85rem; font-weight: 600; cursor: pointer; border: none; transition: var(--transition); display: flex; align-items: center; gap: 6px; justify-content: center; box-shadow: 0 4px 15px var(--shadow-color);} .share-btn:hover {background: linear-gradient(135deg, var(--primary-dark), var(--secondary-color)); transform: translateY(-2px) scale(1.1); box-shadow: 0 8px 20px var(--shadow-color);} .filter-container {display: flex; gap: 12px; margin-bottom: 18px; overflow-x: auto; padding: 12px; scrollbar-width: none; direction: rtl;} .filter-container::-webkit-scrollbar {display: none;} .filter-btn {padding: 8px 14px; border-radius: 12px; background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1)); color: var(--text-light); font-size: 0.85rem; font-weight: 500; cursor: pointer; border: 1px solid var(--border-color); transition: var(--transition); box-shadow: 0 4px 15px var(--shadow-color);} .filter-btn.active {background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: var(--text-color); box-shadow: 0 6px 20px var(--shadow-color);} .filter-btn:hover {transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px var(--shadow-color);} .report-problem-content {display: flex; flex-direction: column; gap: 18px; padding: 20px;} .report-problem-content textarea {width: 100%; min-height: 100px; padding: 12px; border-radius: 10px; border: 1px solid var(--border-color); background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(67, 97, 238, 0.05)); color: var(--text-color); font-family: 'Vazirmatn', sans-serif; font-size: 0.9rem; resize: none; box-shadow: 0 0 10px var(--shadow-color);} .report-problem-content textarea:focus {outline: none; border-color: var(--primary-light); box-shadow: 0 0 12px var(--shadow-color);} .report-problem-content button {background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: var(--text-color); padding: 14px; border-radius: 12px; font-weight: 700; cursor: pointer; border: none; transition: var(--transition); box-shadow: 0 6px 20px var(--shadow-color);} .report-problem-content button:hover {transform: translateY(-3px) scale(1.05); box-shadow: 0 10px 25px var(--shadow-color);} .report-problem-content button:disabled {opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none;} .report-problem-content button .loading-spinner-small {display: inline-block; width: 18px; height: 18px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top-color: white; animation: spin 1s ease-in-out infinite; margin-left: 10px;} @keyframes spin {to {transform: rotate(360deg);}} .music-controls {display: flex; justify-content: center; gap: 18px; margin-top: 20px;} .music-btn {background: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(114, 9, 183, 0.15)); color: var(--text-color); padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; border: 1px solid var(--border-color); transition: var(--transition); box-shadow: 0 4px 15px var(--shadow-color);} .music-btn:hover {transform: translateY(-3px) scale(1.05); background: linear-gradient(135deg, rgba(67, 97, 238, 0.25), rgba(114, 9, 183, 0.25)); box-shadow: 0 8px 25px var(--shadow-color);} .music-logo {width: 120px; height: 120px; margin: 20px auto; display: block; border-radius: 50%; object-fit: contain; animation: spin 18s linear infinite; box-shadow: 0 0 20px var(--shadow-color); background: transparent; image-rendering: auto;}</style><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head><body class="theme-default"><audio id="bgMusic" loop><source src="https://uploadkon.ir/uploads/833c07_25shervin-nahal-online-audio-converter-com-.mp3" type="audio/mpeg"></audio><div class="loading-window" id="loadingWindow"><div class="loading-content"><div class="loading-messages"><span>چند لحظه صبر کنید</span></div><div class="loading-spinner"><div class="loading-frame"></div></div><div class="loading-footer">آقای ایکسرو</div></div></div><div class="permanent-window" id="permanentWindow"><div class="top-bar"><div class="logo" id="reportProblemBtn"><i class="fas fa-exclamation-triangle"></i><span>گزارش مشکل</span></div><div class="menu-btn" id="mainMenuBtn"><div class="menu-line"></div><div class="menu-line"></div><div class="menu-line"></div></div></div><div class="content"><div class="welcome-container"><div class="news-container"><div class="news-content"><div class="info-box"><div class="info-icon"><i class="fas fa-laptop"></i></div><div class="info-text">سیستم:</div><div class="info-value" id="device">--</div></div><div class="info-box"><div class="info-icon"><i class="fas fa-map-marker-alt"></i></div><div class="info-text">آیپی:</div><div class="info-value" id="ip">--</div></div><div class="info-box"><div class="info-icon"><i class="fas fa-tachometer-alt"></i></div><div class="info-text">پینگ:</div><div class="info-value" id="ping">-- م‌ث</div></div></div></div></div></div></div><button class="floating-btn" id="configSelectBtn"><i class="fas fa-shopping-cart"></i></button><div class="modal-overlay" id="mainMenuOverlay"></div><div class="modal-window main-menu" id="mainMenu"><div class="modal-header"><div class="modal-title">منوی اصلی</div><div class="home-btn" id="closeMainMenu"><img src="https://biaupload.com/do.php?imgf=org-19fb842c16fb1.png" alt="Close"></div></div><div class="modal-content"><div class="menu-item" id="settingsItem"><div class="menu-item-title"><i class="fas fa-music"></i><span>موزیک</span></div><div class="menu-item-desc">کنترل موسیقی پس‌زمینه</div></div><div class="menu-item" id="aboutItem"><div class="menu-item-title"><i class="fas fa-info-circle"></i><span>درباره ما</span></div><div class="menu-item-desc">اطلاعات بیشتر درباره ایکسرو</div></div></div></div><div class="modal-overlay" id="configSelectOverlay"></div><div class="modal-window public-shop-menu" id="publicShopMenu"><div class="modal-header"><div class="modal-title-container"><img src="https://biaupload.com/do.php?imgf=org-c58378daa9411.png" class="modal-title-img" id="modalTitleImg" alt="Config Update"><span class="modal-title" id="modalTitle">بروزرسانی کانفیگ‌ها</span><span class="modal-progress-text" id="modalProgressText">۰٪</span></div><div class="home-btn" id="closePublicShopMenu"><img src="https://biaupload.com/do.php?imgf=org-19fb842c16fb1.png" alt="Close"></div></div><div class="modal-content"><div class="filter-container" id="filterContainer"><button class="filter-btn active" data-protocol="all">همه</button><button class="filter-btn" data-protocol="hysteria2">Hysteria2</button><button class="filter-btn" data-protocol="vless">Vless</button><button class="filter-btn" data-protocol="trojan">Trojan</button><button class="filter-btn" data-protocol="ss">Shadowsocks</button><button class="filter-btn" data-protocol="vmess">Vmess</button><button class="filter-btn" data-protocol="wireguard">WireGuard</button></div><div class="tab-content active" id="mahsa-tab"><div class="configs-container" id="configsContainer"><div class="loading-container"><div class="loading-dots"><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div></div></div><div class="error" style="display:none">متاسفانه موجود نیست</div></div></div></div></div><div class="modal-window settings-panel" id="settingsPanel"><div class="modal-header"><div class="modal-title">موزیک</div><div class="home-btn" id="closeSettingsPanel"><img src="https://is1-ssl.mzstatic.com/image/thumb/Music122/v4/d0/51/00/d0510085-dd1d-039b-5fe1-d60c71722735/artwork.jpg/360x360bb.webp" alt="Close"></div></div><div class="modal-content"><img src="https://is1-ssl.mzstatic.com/image/thumb/Music122/v4/d0/51/00/d0510085-dd1d-039b-5fe1-d60c71722735/artwork.jpg/360x360bb.webp" class="music-logo" alt="Music Logo"><div class="music-controls"><button class="music-btn" id="prevTrack"><i class="fas fa-backward"></i> قبلی</button><button class="music-btn" id="playPause"><i class="fas fa-play"></i> پخش</button><button class="music-btn" id="nextTrack"><i class="fas fa-forward"></i> بعدی</button></div></div></div><div class="modal-window about-panel" id="aboutPanel"><div class="modal-header"><div class="modal-title">درباره ما</div><div class="home-btn" id="closeAboutPanel"><img src="https://biaupload.com/do.php?imgf=org-19fb842c16fb1.png" alt="Close"></div></div><div class="modal-content"><p style="font-size:0.95rem;color:var(--text-light);text-align:center;padding:20px;">ایکسرو با بیش از ۵ سال فعالیت در زمینه ارائه خدمات فیلترشکن و VPN، با تکیه بر تجربه و تخصص، بهترین راهکارها را برای دسترسی امن و سریع به اینترنت ارائه می‌دهد. ما متعهد به حفظ حریم خصوصی و امنیت کاربران هستیم.</p><a href="https://t.me/xrovpn" target="_blank" class="btn btn-primary btn-large"><i class="fas fa-telegram"></i> کانال رسمی ایکسرو</a></div></div><div class="modal-window report-problem-menu" id="reportProblemMenu"><div class="modal-header"><div class="modal-title">گزارش مشکل</div><div class="home-btn" id="closeReportProblemMenu"><img src="https://biaupload.com/do.php?imgf=org-19fb842c16fb1.png" alt="Close"></div></div><div class="modal-content report-problem-content"><textarea id="reportProblemText" placeholder="مشکل خود را اینجا بنویسید..."></textarea><button id="submitReportProblem"><i class="fas fa-paper-plane"></i> ارسال گزارش</button></div></div><div class="modal-overlay" id="reportProblemOverlay"></div><div class="notification" id="notification"><div class="notification-icon" id="notificationIcon"><i class="fas fa-check-circle"></i></div><div class="notification-message" id="notificationMessage">عملیات با موفقیت انجام شد</div></div><script>document.addEventListener('DOMContentLoaded', () => {const e = {permanentWindow: document.getElementById('permanentWindow'),loadingWindow: document.getElementById('loadingWindow'),mainMenuBtn: document.getElementById('mainMenuBtn'),mainMenu: document.getElementById('mainMenu'),mainMenuOverlay: document.getElementById('mainMenuOverlay'),configSelectBtn: document.getElementById('configSelectBtn'),publicShopMenu: document.getElementById('publicShopMenu'),configSelectOverlay: document.getElementById('configSelectOverlay'),settingsItem: document.getElementById('settingsItem'),settingsPanel: document.getElementById('settingsPanel'),aboutItem: document.getElementById('aboutItem'),aboutPanel: document.getElementById('aboutPanel'),notification: document.getElementById('notification'),notificationIcon: document.getElementById('notificationIcon'),notificationMessage: document.getElementById('notificationMessage'),bgMusic: document.getElementById('bgMusic'),configsContainer: document.getElementById('configsContainer'),filterContainer: document.getElementById('filterContainer'),device: document.getElementById('device'),ip: document.getElementById('ip'),ping: document.getElementById('ping'),reportProblemBtn: document.getElementById('reportProblemBtn'),reportProblemMenu: document.getElementById('reportProblemMenu'),reportProblemOverlay: document.getElementById('reportProblemOverlay'),reportProblemText: document.getElementById('reportProblemText'),submitReportProblem: document.getElementById('submitReportProblem'),closeReportProblemMenu: document.getElementById('closeReportProblemMenu'),playPause: document.getElementById('playPause'),prevTrack: document.getElementById('prevTrack'),nextTrack: document.getElementById('nextTrack'),closeAboutPanel: document.getElementById('closeAboutPanel'),closePublicShopMenu: document.getElementById('closePublicShopMenu'),closeSettingsPanel: document.getElementById('closeSettingsPanel'),closeMainMenu: document.getElementById('closeMainMenu'),modalTitleImg: document.getElementById('modalTitleImg'),modalTitle: document.getElementById('modalTitle'),modalProgressText: document.getElementById('modalProgressText')};const UI_STATE_KEY = 'xro_vpn_ui_state';const CACHE_KEY = 'xro_vpn_configs';const CACHE_EXPIRY = 5 * 60 * 1000;const toggleModal = (modalId, state, overlayId) => {closeAllModals();const modal = e[modalId], overlay = e[overlayId];if (!modal) {console.error(`Modal ${modalId} not found`);return;}modal.classList.toggle('open', state);if (overlay) {overlay.classList.toggle('show', state);overlay.classList.toggle('hidden', !state);}saveUIState();console.log(`Modal ${modalId} ${state ? 'opened' : 'closed'}`);};const closeAllModals = () => {['mainMenu', 'publicShopMenu', 'settingsPanel', 'aboutPanel', 'reportProblemMenu'].forEach(id => e[id]?.classList.remove('open'));['mainMenuOverlay', 'configSelectOverlay', 'reportProblemOverlay'].forEach(id => {e[id]?.classList.remove('show');e[id]?.classList.add('hidden');});saveUIState();console.log('All modals closed');};const showNotification = (msg, type = 'success') => {e.notification.className = 'notification';e.notificationIcon.className = 'notification-icon';const icons = {success: '<i class="fas fa-check-circle"></i>',error: '<i class="fas fa-times-circle"></i>',info: '<i class="fas fa-info-circle"></i>'};e.notification.classList.add(`notification-${type}`);e.notificationIcon.innerHTML = icons[type];e.notificationMessage.textContent = msg;e.notification.classList.add('show');setTimeout(() => {e.notification.classList.remove('show');}, 3000);};const submitReportProblem = async () => {const msg = e.reportProblemText.value.trim();if (!msg) {showNotification('لطفاً متن گزارش را وارد کنید', 'error');return;}const originalText = e.submitReportProblem.innerHTML;e.submitReportProblem.disabled = true;e.submitReportProblem.innerHTML = '<i class="fas fa-circle-notch"></i> در حال ارسال...';try {const token = '6881799898:AAH6pU-1-Jvdp7VHxHCMbx_fLDpnH-kLzqQ';const adminId = '8402261840';const res = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {method: 'POST',headers: {'Content-Type': 'application/json'},body: JSON.stringify({chat_id: adminId,text: `گزارش مشکل جدید:\n${msg}`})});if (!res.ok) throw new Error('خطا در ارسال گزارش');showNotification('گزارش با موفقیت ارسال شد', 'success');e.reportProblemText.value = '';toggleModal('reportProblemMenu', false, 'reportProblemOverlay');} catch (err) {showNotification(`خطا: ${err.message}`, 'error');} finally {e.submitReportProblem.disabled = false;e.submitReportProblem.innerHTML = originalText;}};const toPersianDigits = str => str.replace(/[0-9]/g, d => '۰۱۲۳۴۵۶۷۸۹'[parseInt(d)]);const updateIP = async () => {try {const res = await fetch('https://api.ipify.org?format=json', {cache: 'no-store'});if (!res.ok) throw new Error('خطا در دریافت آی‌پی');const data = await res.json();e.ip.textContent = toPersianDigits(data.ip);} catch (err) {console.error('IP fetch error:', err);e.ip.textContent = 'نامشخص';}};const updatePing = async () => {try {const start = performance.now();await fetch('https://cloudflare.com/cdn-cgi/trace', {method: 'HEAD',cache: 'no-store'});const pingValue = Math.round(performance.now() - start);e.ping.textContent = `${toPersianDigits(pingValue.toString())} م‌ث`;} catch (err) {console.error('Ping fetch error:', err);e.ping.textContent = 'نامشخص';}};const refreshIP = () => {updateIP();setTimeout(refreshIP, 5000);};const refreshPing = () => {updatePing();setTimeout(refreshPing, 1000);};const parseConfig = config => {try {const [, protocol, rest] = config.match(/^(hysteria2|vless|trojan|ss|vmess|wireguard):\/\/(.+)/i) || [];if (!protocol) return null;if (protocol.toLowerCase() === 'vmess') {const data = JSON.parse(atob(rest.split('#')[0]));return data.add ? {host: data.add,protocol} : null;}if (protocol.toLowerCase() === 'wireguard') {const data = JSON.parse(rest.split('#')[0]);return data.Address ? {host: data.Address,protocol} : null;}const host = rest.split('#')[0].split('?')[0].match(/@([^:@]+)/)?.[1];return /^[a-zA-Z0-9.-]+$/.test(host) ? {host,protocol} : null;} catch {return null;}};const formatConfig = config => {try {const [, protocol, rest] = config.match(/^([^:]+):\/\/(.+)/i) || [];if (!protocol) return config;if (protocol.toLowerCase() === 'vmess') {const [base, ...comment] = rest.split('#');const data = JSON.parse(atob(base));data.ps = 'telegram ☜☞ v2xro';return `vmess://${btoa(JSON.stringify(data))}${comment.length ? '#' + comment.join('#') : ''}`;}if (protocol.toLowerCase() === 'wireguard') {const [base, ...comment] = rest.split('#');const data = JSON.parse(base);data.ps = 'telegram ☜☞ v2xro';return `wireguard://${JSON.stringify(data)}${comment.length ? '#' + comment.join('#') : ''}`;}if (['vless', 'trojan', 'ss'].includes(protocol.toLowerCase())) {const [base, ...comment] = rest.split('#');return comment.length ? `${protocol}://${base}#telegram ☜☞ v2xro` : config;}return config;} catch {return config;}};const testPing = host => new Promise(resolve => {const start = performance.now();const controller = new AbortController();const timeout = setTimeout(() => controller.abort(), 5000);fetch(`https://${host}/generate_204`, {method: 'HEAD',mode: 'no-cors',signal: controller.signal,cache: 'no-store'}).then(() => {clearTimeout(timeout);resolve({success: true,ping: Math.round(performance.now() - start)});}).catch(err => {clearTimeout(timeout);resolve({success: false,error: err.name === 'AbortError' ? 'تایم‌اوت' : 'عدم اتصال'});});});const getLocation = async host => {try {const res = await fetch(`http://ip-api.com/json/${host}?fields=countryCode`, {cache: 'no-store'});if (!res.ok) return null;const data = await res.json();return data.countryCode ? {countryCode: data.countryCode.toUpperCase()} : null;} catch {return null;}};const flagImages = {'CA': 'https://biaupload.com/do.php?imgf=org-2365ab5b670f1.png','FI': 'https://biaupload.com/do.php?imgf=org-a721bfe2628f2.png','DE': 'https://biaupload.com/do.php?imgf=org-ccc23c0b39f63.png','IE': 'https://biaupload.com/do.php?imgf=org-edb9149665d04.png','US': 'https://biaupload.com/do.php?imgf=org-8c420612f1d81.png','TR': 'https://biaupload.com/do.php?imgf=org-e65fe7e1e3cf2.png','AU': 'https://biaupload.com/do.php?imgf=org-8dfd0db6b87d3.png','ES': 'https://biaupload.com/do.php?imgf=org-e5b8c992c01b4.png'};const getCountryImage = countryCode => flagImages[countryCode] || 'https://biaupload.com/do.php?imgf=org-7a7eb985bb052.png';const getCachedConfigs = () => {try {const cached = localStorage.getItem(CACHE_KEY);if (!cached) return null;const {data, timestamp} = JSON.parse(cached);if (Date.now() - timestamp > CACHE_EXPIRY) return null;return data;} catch {return null;}};const setCachedConfigs = data => localStorage.setItem(CACHE_KEY, JSON.stringify({data, timestamp: Date.now()}));const saveUIState = () => {const state = {activeFilter: e.filterContainer.querySelector('.filter-btn.active')?.dataset.protocol || 'all',isPublicShopMenuOpen: e.publicShopMenu.classList.contains('open'),isMainMenuOpen: e.mainMenu.classList.contains('open'),isSettingsPanelOpen: e.settingsPanel.classList.contains('open'),isAboutPanelOpen: e.aboutPanel.classList.contains('open'),isReportProblemMenuOpen: e.reportProblemMenu.classList.contains('open')};sessionStorage.setItem(UI_STATE_KEY, JSON.stringify(state));};const loadUIState = () => {const state = sessionStorage.getItem(UI_STATE_KEY);if (!state) return;const {activeFilter, isPublicShopMenuOpen, isMainMenuOpen, isSettingsPanelOpen, isAboutPanelOpen, isReportProblemMenuOpen} = JSON.parse(state);e.filterContainer.querySelectorAll('.filter-btn').forEach(btn => {btn.classList.toggle('active', btn.dataset.protocol === activeFilter);});if (isPublicShopMenuOpen) toggleModal('publicShopMenu', true, 'configSelectOverlay');if (isMainMenuOpen) toggleModal('mainMenu', true, 'mainMenuOverlay');if (isSettingsPanelOpen) toggleModal('settingsPanel', true, 'mainMenuOverlay');if (isAboutPanelOpen) toggleModal('aboutPanel', true, 'mainMenuOverlay');if (isReportProblemMenuOpen) toggleModal('reportProblemMenu', true, 'reportProblemOverlay');};const updateProgress = percent => {let currentPercent = parseInt(e.modalProgressText.textContent) || 0;const targetPercent = Math.min(percent, 100);const interval = setInterval(() => {if (currentPercent >= targetPercent) {clearInterval(interval);if (targetPercent >= 100) {setTimeout(() => {e.modalProgressText.style.display = 'none';e.modalTitle.style.display = 'inline';}, 1000);}return;}currentPercent += 1;e.modalTitle.style.display = 'none';e.modalProgressText.style.display = 'inline';e.modalProgressText.textContent = `${toPersianDigits(currentPercent.toString())}٪`;}, 50);};const shareConfig = async config => {if (navigator.share) {try {await navigator.share({title: 'کانفیگ VPN ایکسرو',text: 'کانفیگ VPN از ایکسرو',url: config,});showNotification('کانفیگ با موفقیت به اشتراک گذاشته شد', 'success');} catch (err) {showNotification('خطا در اشتراک‌گذاری کانفیگ', 'error');}} else {showNotification('اشتراک‌گذاری در این مرورگر پشتیبانی نمی‌شود', 'error');}};const updateConfigPing = async (config, pingElement) => {try {const parsed = parseConfig(config.config);if (!parsed) return;const pingResult = await testPing(parsed.host);if (pingResult.success) {pingElement.textContent = `${toPersianDigits(pingResult.ping.toString())} م‌ث`;pingElement.className = 'ping-result';pingElement.classList.add(pingResult.ping < 300 ? 'fast' : pingResult.ping < 600 ? 'medium' : 'slow');} else {pingElement.textContent = 'نامشخص';pingElement.className = 'ping-result slow';}} catch (err) {console.error('Config ping error:', err);pingElement.textContent = 'نامشخص';pingElement.className = 'ping-result slow';}};const refreshConfigPings = () => {const configBoxes = e.configsContainer.querySelectorAll('.config-box');configBoxes.forEach(box => {const config = box.dataset.config;const pingElement = box.querySelector('.ping-result');if (config && pingElement) {updateConfigPing(JSON.parse(config), pingElement);}});setTimeout(refreshConfigPings, 1000);};const extractConfigs = async (forceRefresh = false) => {e.configsContainer.innerHTML = '<div class="loading-container"><div class="loading-dots"><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div></div></div>';updateProgress(0);const cachedConfigs = !forceRefresh && getCachedConfigs();if (cachedConfigs) {updateProgress(50);renderConfigs(cachedConfigs);updateProgress(100);return;}try {updateProgress(10);const url = 'https://gist.githubusercontent.com/xroVPN/12a0c02781cfed451da84e9b802c0912/raw';const res = await fetch(url, {mode: 'cors',cache: 'no-store'});updateProgress(30);if (!res.ok) {e.configsContainer.innerHTML = '<p class="error">خطا در دریافت کانفیگ‌ها</p>';showNotification('خطا در دریافت کانفیگ‌ها: سرور پاسخ نداد', 'error');updateProgress(100);return;}const configs = (await res.text()).split('\n').filter(c => c.trim());if (!configs.length) {e.configsContainer.innerHTML = '<p class="error">هیچ کانفیگی یافت نشد</p>';showNotification('هیچ کانفیگی در فایل موجود نیست', 'error');updateProgress(100);return;}updateProgress(50);const batchSize = 10;const validConfigs = [];for (let i = 0; i < configs.length; i += batchSize) {const batch = configs.slice(i, i + batchSize);const results = await Promise.all(batch.map(async config => {try {const formattedConfig = formatConfig(config);const parsed = parseConfig(config);if (!parsed) return null;const pingResult = await testPing(parsed.host);if (!pingResult.success || pingResult.ping > 600) return null;const location = await getLocation(parsed.host);return {config: formattedConfig,ping: pingResult.ping,protocol: parsed.protocol,countryCode: location?.countryCode || null};} catch {return null;}}));validConfigs.push(...results.filter(c => c));updateProgress(50 + ((i + batchSize) / configs.length) * 40);}if (!validConfigs.length) {e.configsContainer.innerHTML = '<p class="error">هیچ کانفیگ معتبری یافت نشد</p>';showNotification('هیچ کانفیگ معتبری یافت نشد', 'error');updateProgress(100);return;}setCachedConfigs(validConfigs);renderConfigs(validConfigs);updateProgress(100);} catch (err) {e.configsContainer.innerHTML = '<p class="error">خطا در بارگذاری کانفیگ‌ها</p>';showNotification(`خطا: ${err.message}`, 'error');updateProgress(100);console.error('Config fetch error:', err);}};const renderConfigs = configs => {e.configsContainer.innerHTML = '';const activeProtocol = e.filterContainer.querySelector('.filter-btn.active')?.dataset.protocol || 'all';const filteredConfigs = configs.filter(c => activeProtocol === 'all' || c.protocol.toLowerCase() === activeProtocol);if (!filteredConfigs.length) {e.configsContainer.innerHTML = '<p class="error">هیچ کانفیگی برای این فیلتر موجود نیست</p>';return;}filteredConfigs.sort((a, b) => a.ping - b.ping).forEach((c, i) => {const box = document.createElement('div');box.className = 'config-box';box.style.opacity = '0';box.style.animation = `slideInRight 0.6s ease-out ${i * 0.1}s forwards`;box.dataset.protocol = c.protocol.toLowerCase();box.dataset.config = JSON.stringify(c);const pingClass = c.ping < 300 ? 'fast' : c.ping < 600 ? 'medium' : 'slow';const logoContent = `<img src="${getCountryImage(c.countryCode)}" class="config-logo" alt="Config Logo">`;box.innerHTML = `<button class="share-btn"><i class="fas fa-share-alt"></i></button><div class="config-logo-container">${logoContent}</div><div class="ping-result ${pingClass}"><i class="fas fa-tachometer-alt"></i> ${toPersianDigits(c.ping.toString())} م‌ث</div><button class="copy-btn"><i class="fas fa-copy"></i> کپی</button>`;box.querySelector('.copy-btn').addEventListener('click', () => {navigator.clipboard.writeText(c.config).then(() => {showNotification('کانفیگ کپی شد', 'success');}).catch(() => {showNotification('خطا در کپی کردن کانفیگ', 'error');});});box.querySelector('.share-btn').addEventListener('click', () => {shareConfig(c.config);});e.configsContainer.appendChild(box);});saveUIState();refreshConfigPings();};const setupFilters = () => {e.filterContainer.querySelectorAll('.filter-btn').forEach(btn => btn.addEventListener('click', () => {e.filterContainer.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));btn.classList.add('active');const cachedConfigs = getCachedConfigs();if (cachedConfigs) {renderConfigs(cachedConfigs);} else {extractConfigs();}}));};const togglePlayPause = () => {if (e.bgMusic.paused) {e.bgMusic.play().then(() => {e.playPause.innerHTML = '<i class="fas fa-pause"></i> مکث';showNotification('موسیقی در حال پخش', 'success');}).catch(() => {showNotification('برای پخش موسیقی، ابتدا با صفحه تعامل کنید', 'info');});} else {e.bgMusic.pause();e.playPause.innerHTML = '<i class="fas fa-play"></i> پخش';showNotification('موسیقی متوقف شد', 'info');}};e.modalTitleImg.addEventListener('click', () => extractConfigs(true));e.device.textContent = /Mobile|Android|iPhone|iPad/i.test(navigator.userAgent) ? 'موبایل' : 'دسکتاپ';setupFilters();loadUIState();setTimeout(() => {e.loadingWindow.classList.add('hidden');e.permanentWindow.style.display = 'flex';showNotification('به ایکسرو خوش آمدید', 'success');e.bgMusic.play().catch(() => {showNotification('برای پخش موسیقی، ابتدا با صفحه تعامل کنید', 'info');});if (e.publicShopMenu.classList.contains('open')) {extractConfigs();}}, 5000);e.mainMenuBtn.addEventListener('click', () => toggleModal('mainMenu', true, 'mainMenuOverlay'));e.configSelectBtn.addEventListener('click', () => {toggleModal('publicShopMenu', true, 'configSelectOverlay');extractConfigs();});e.settingsItem.addEventListener('click', () => toggleModal('settingsPanel', true, 'mainMenuOverlay'));e.aboutItem.addEventListener('click', () => toggleModal('aboutPanel', true, 'mainMenuOverlay'));e.reportProblemBtn.addEventListener('click', () => toggleModal('reportProblemMenu', true, 'reportProblemOverlay'));e.submitReportProblem.addEventListener('click', submitReportProblem);e.closeMainMenu.addEventListener('click', () => toggleModal('mainMenu', false, 'mainMenuOverlay'));e.closePublicShopMenu.addEventListener('click', () => toggleModal('publicShopMenu', false, 'configSelectOverlay'));e.closeSettingsPanel.addEventListener('click', () => toggleModal('settingsPanel', false, 'mainMenuOverlay'));e.closeAboutPanel.addEventListener('click', () => toggleModal('aboutPanel', false, 'mainMenuOverlay'));e.closeReportProblemMenu.addEventListener('click', () => toggleModal('reportProblemMenu', false, 'reportProblemOverlay'));e.mainMenuOverlay.addEventListener('click', closeAllModals);e.configSelectOverlay.addEventListener('click', closeAllModals);e.reportProblemOverlay.addEventListener('click', closeAllModals);e.playPause.addEventListener('click', togglePlayPause);refreshIP();refreshPing();});</script></body></html>
